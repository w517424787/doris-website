<!doctype html>
<html lang="zh-Hans-CN" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<meta name="generator" content="Docusaurus v2.4.1">
<link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Apache Doris RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Apache Doris Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DT7W9E9722"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DT7W9E9722",{anonymize_ip:!0})</script>






<link rel="icon" href="/zh-CN/images/logo-only.png">
<link rel="manifest" href="/zh-CN/manifest.json">
<meta name="theme-color" content="#FFFFFF">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/zh-CN/img/docusaurus.png">
<link rel="mask-icon" href="/zh-CN/img/docusaurus.svg" color="rgb(37, 194, 160)">
<meta name="msapplication-TileImage" content="/zh-CN/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:500">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:400"><title data-rh="true">11 篇博文 含有标签「版本发布」 - Apache Doris</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doris.apache.org/zh-CN/blog/tags/版本发布"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" property="og:title" content="11 篇博文 含有标签「版本发布」 - Apache Doris"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/zh-CN/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://doris.apache.org/zh-CN/blog/tags/版本发布"><link data-rh="true" rel="alternate" href="https://doris.apache.org/blog/tags/版本发布" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://doris.apache.org/zh-CN/blog/tags/版本发布" hreflang="zh-Hans-CN"><link data-rh="true" rel="alternate" href="https://doris.apache.org/blog/tags/版本发布" hreflang="x-default"><link rel="stylesheet" href="https://cdnd.selectdb.com/zh-CN/assets/css/styles.53cdbd0d.css">
<link rel="preload" href="https://cdnd.selectdb.com/zh-CN/assets/js/runtime~main.d246078c.js" as="script">
<link rel="preload" href="https://cdnd.selectdb.com/zh-CN/assets/js/main.70603022.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><div class="announcementBar_s0pr" style="background-color:#3C2FD4;color:#FFFFFF" role="banner"><div class="announcementBarPlaceholder_qxfj"></div><div class="announcementBarContent_dpRF"><a href="https://github.com/apache/doris" target="_blank" style="display: flex; width: 100%; align-items: center; justify-content: center; margin-left: 4px; text-decoration: none; color: white">Do you like Apache Doris？Give us a 🌟 on Github 
                        <img style="width: 1.2rem; height: 1.2rem; margin-left: 0.4rem;" src="/images/github-white-icon.svg">
                    </a></div><button type="button" class="clean-btn close announcementBarClose_iXyO" aria-label="关闭"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><div class="navbar__logo"><img src="https://cdnd.selectdb.com/images/logo.svg" alt="Doris" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://cdnd.selectdb.com/images/logo.svg" alt="Doris" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/zh-CN/">首页</a><a class="navbar__item navbar__link" href="/zh-CN/docs/dev/summary/basic-summary">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-CN/blog">博客</a><a class="navbar__item navbar__link" href="/zh-CN/community/team">社区</a><a class="navbar__item navbar__link" href="/zh-CN/users">用户</a></div><div class="navbar__items navbar__items--right"><div class="versions">版本<!-- -->:<div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh-CN/docs/dev/get-starting/">dev</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-CN/docs/dev/get-starting/">dev</a></li><li><a class="dropdown__link" href="/zh-CN/docs/1.2/get-starting/">1.2</a></li></ul></div></div><div class="locale-box"><a href="/blog/tags/版本发布" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">EN</a><a href="/zh-CN/blog/tags/版本发布" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link dropdown__link--active">中文</a></div><a class="navbar__item navbar__link header-right-button-primary navbar-download-mobile" href="/zh-CN/download">下载</a><div class="navbar-search searchBox_ZlJk"><div class="navbar__search searchBarContainer_PzyC"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing__K5d searchBarLoadingRing_e2f0"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_m7ml"><kbd class="searchHint_zuPL">ctrl</kbd><kbd class="searchHint_zuPL">K</kbd></div></div></div><span class="github-btn desktop header-right-button-github"><span class="github-btn github-btn-large"><a class="gh-btn" href="//github.com/apache/doris/" target="_blank"><span class="gh-ico" aria-hidden="true"></span><span class="gh-text">Star</span></a><a class="gh-count" target="_blank" href="//github.com/apache/doris/stargazers/"></a></span></span><a class="header-right-button-primary navbar-download-desktop" href="/zh-CN/download">下载</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><div class="main-wrapper"><div class="container margin-vert--lg blog-container"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>11 篇博文 含有标签「版本发布」</h1><a href="/zh-CN/blog/tags">查看所有标签</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.2.3">Apache Doris 1.2.3 Release 版本正式发布</a></h2><div class="blog-info"><time datetime="2023-03-20T00:00:00.000Z" itemprop="datePublished">2023年3月20日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>亲爱的社区小伙伴们，我们很高兴地宣布，<strong>Apache Doris 于 2023 年 3 月 20 日迎来 1.2.3 Release 版本的正式发布</strong>！在新版本中包含超过 200 项功能优化和问题修复。同时，1.2.3 版本作为 1.2 LTS 的迭代版本，<strong>更加稳定易用，建议用户升级到这个版本</strong>。</p><p><strong>GitHub下载：</strong><a href="https://github.com/apache/doris/releases/tag/1.2.3-rc02" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases/tag/1.2.3-rc02</a></p><p><strong>官网下载页：</strong><a href="https://doris.apache.org/zh-CN/download" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/download</a></p><h1>Improvement</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jdbc-catalog">JDBC Catalog<a href="#jdbc-catalog" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持通过 JDBC Catalog 连接到另一个 Doris 数据库。</li></ul><p>参考文档：<a href="https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc/#doris" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc/#doris</a></p><ul><li><p>支持通过参数 <code>only_specified_database</code> 来同步指定的数据库。</p></li><li><p>支持通过 <code>lower_case_table_names</code> 参数控制是否以小写形式同步表名，解决表名区分大小写的问题。</p></li></ul><p>参考文档：<a href="https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc</a></p><ul><li>优化 JDBC Catalog 的读取性能。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elasticsearch-catalog">Elasticsearch Catalog<a href="#elasticsearch-catalog" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>支持 Array 类型映射。</p></li><li><p>支持通过 <code>like_push_down</code> 属性下推 like 表达式来控制 ES 集群的 CPU 开销。</p></li></ul><p>参考文档：<a href="https://doris.apache.org/docs/dev/lakehouse/multi-catalog/es" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/es</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hive-catalog">Hive Catalog<a href="#hive-catalog" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>支持 Hive 表默认分区 <code>__HIVE_DEFAULT_PARTITION__</code>。</p></li><li><p>Hive Metastore 元数据自动同步支持压缩格式的通知事件。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="动态分区优化">动态分区优化<a href="#动态分区优化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持通过 storage_medium 参数来控制创建动态分区的默认存储介质。</li></ul><p>参考文档：<a href="https://doris.apache.org/docs/dev/advanced/partition/dynamic-partition" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/dev/advanced/partition/dynamic-partition</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="优化-be-的线程模型">优化 BE 的线程模型<a href="#优化-be-的线程模型" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>优化 BE 的线程模型，以避免频繁创建和销毁线程所带来的稳定性问题。</li></ul><h1>Bug 修复</h1><ul><li><p>修复了部分 Unique Key 模型 Merge-on-Write 表的问题；</p></li><li><p>修复了部分 Compaction 相关问题；</p></li><li><p>修复了部分 Delete 语句导致的数据问题；</p></li><li><p>修复了部分 Query 执行问题；</p></li><li><p>修复了在某些操作系统上使用 JDBC Catalog 导致 BE 宕机的问题；</p></li><li><p>修复了部分 Multi-Catalog 的问题；</p></li><li><p>修复了部分内存统计和优化问题；</p></li><li><p>修复了部分 DecimalV3 和 date/datetimev2 的相关问题。</p></li><li><p>修复了部分导入过程中的稳定性问题；</p></li><li><p>修复了部分 Light Schema Change 的问题；</p></li><li><p>修复了使用 <code>datetime</code> 类型无法批量创建分区的问题;</p></li><li><p>修复了大量失败的 Broker Load 作业导致 FE 内存使用率过高的问题;</p></li><li><p>修复了删除表后无法取消 Stream Load 的问题；</p></li><li><p>修复了某些情况下查询 <code>information_schema</code> 库表超时的问题；</p></li><li><p>修复了使用 <code>select outfile</code> 并发数据导出导致 BE 宕机的问题；</p></li><li><p>修复了事务性 Insert 操作导致内存泄漏的问题；</p></li><li><p>修复了 BE Tablet GC 线程导致 IO 负载过高的问题；</p></li><li><p>修复了 Kafka Routine Load 中提交 Offset 不准确的问题。</p></li></ul><h1>致谢</h1><p>Apache Doris 1.2.3 版本的发布离不开所有社区用户的支持，在此向所有参与版本设计、开发、测试、讨论的社区 52 位贡献者们表示感谢，他们分别是：</p><p><a href="https://github.com/zy-kkk" target="_blank" rel="noopener noreferrer">@zy-kkk</a>
<a href="https://github.com/zhannngchen" target="_blank" rel="noopener noreferrer">@zhannngchen</a>
<a href="https://github.com/ZhangYu0123" target="_blank" rel="noopener noreferrer">@ZhangYu0123</a>
<a href="https://github.com/zhangstar333" target="_blank" rel="noopener noreferrer">@zhangstar333</a>
<a href="https://github.com/zclllyybb" target="_blank" rel="noopener noreferrer">@zclllyybb</a>
<a href="https://github.com/yuxuan-luo" target="_blank" rel="noopener noreferrer">@yuxuan-luo</a>
<a href="https://github.com/yixiutt" target="_blank" rel="noopener noreferrer">@yixiutt</a>
<a href="https://github.com/yiguolei" target="_blank" rel="noopener noreferrer">@yiguolei</a>
<a href="https://github.com/yangzhg" target="_blank" rel="noopener noreferrer">@yangzhg</a>
<a href="https://github.com/xinyiZzz" target="_blank" rel="noopener noreferrer">@xinyiZzz</a>
<a href="https://github.com/XieJiann" target="_blank" rel="noopener noreferrer">@XieJiann</a>
<a href="https://github.com/xiaokang" target="_blank" rel="noopener noreferrer">@xiaokang</a>
<a href="https://github.com/WuWQ98" target="_blank" rel="noopener noreferrer">@WuWQ98</a>
<a href="https://github.com/WinkerDu" target="_blank" rel="noopener noreferrer">@WinkerDu</a>
<a href="https://github.com/wangbo" target="_blank" rel="noopener noreferrer">@wangbo</a>
<a href="https://github.com/TangSiyang2001" target="_blank" rel="noopener noreferrer">@TangSiyang2001</a>
<a href="https://github.com/SWJTU-ZhangLei" target="_blank" rel="noopener noreferrer">@SWJTU-ZhangLei</a>
<a href="https://github.com/starocean999" target="_blank" rel="noopener noreferrer">@starocean999</a>
<a href="https://github.com/stalary" target="_blank" rel="noopener noreferrer">@stalary</a>
<a href="https://github.com/sohardforaname" target="_blank" rel="noopener noreferrer">@sohardforaname</a>
<a href="https://github.com/SaintBacchus" target="_blank" rel="noopener noreferrer">@SaintBacchus</a>
<a href="https://github.com/qzsee" target="_blank" rel="noopener noreferrer">@qzsee</a>
<a href="https://github.com/qidaye" target="_blank" rel="noopener noreferrer">@qidaye</a>
<a href="https://github.com/platoneko" target="_blank" rel="noopener noreferrer">@platoneko</a>
<a href="https://github.com/nextdreamblue" target="_blank" rel="noopener noreferrer">@nextdreamblue</a>
<a href="https://github.com/mrhhsg" target="_blank" rel="noopener noreferrer">@mrhhsg</a>
<a href="https://github.com/morrySnow" target="_blank" rel="noopener noreferrer">@morrySnow</a>
<a href="https://github.com/morningman" target="_blank" rel="noopener noreferrer">@morningman</a>
<a href="https://github.com/maochongxin" target="_blank" rel="noopener noreferrer">@maochongxin</a>
<a href="https://github.com/luwei16" target="_blank" rel="noopener noreferrer">@luwei16</a>
<a href="https://github.com/luozenglin" target="_blank" rel="noopener noreferrer">@luozenglin</a>
<a href="https://github.com/liaoxin01" target="_blank" rel="noopener noreferrer">@liaoxin01</a>
<a href="https://github.com/Kikyou1997" target="_blank" rel="noopener noreferrer">@Kikyou1997</a>
<a href="https://github.com/Jibing-Li" target="_blank" rel="noopener noreferrer">@Jibing-Li</a>
<a href="https://github.com/jacktengg" target="_blank" rel="noopener noreferrer">@jacktengg</a>
<a href="https://github.com/htyoung" target="_blank" rel="noopener noreferrer">@htyoung</a>
<a href="https://github.com/HappenLee" target="_blank" rel="noopener noreferrer">@HappenLee</a>
<a href="https://github.com/Gabriel39" target="_blank" rel="noopener noreferrer">@Gabriel39</a>
<a href="https://github.com/freemandealer" target="_blank" rel="noopener noreferrer">@freemandealer</a>
<a href="https://github.com/englefly" target="_blank" rel="noopener noreferrer">@englefly</a>
<a href="https://github.com/eldenmoon" target="_blank" rel="noopener noreferrer">@eldenmoon</a>
<a href="https://github.com/dutyu" target="_blank" rel="noopener noreferrer">@dutyu</a>
<a href="https://github.com/Doris-Extras" target="_blank" rel="noopener noreferrer">@Doris-Extras</a>
<a href="https://github.com/chenlinzhong" target="_blank" rel="noopener noreferrer">@chenlinzhong</a>
<a href="https://github.com/catpineapple" target="_blank" rel="noopener noreferrer">@catpineapple</a>
<a href="https://github.com/Cai-Yao" target="_blank" rel="noopener noreferrer">@Cai-Yao</a>
<a href="https://github.com/caiconghui" target="_blank" rel="noopener noreferrer">@caiconghui</a>
<a href="https://github.com/ByteYue" target="_blank" rel="noopener noreferrer">@ByteYue</a>
<a href="https://github.com/BiteTheDDDDt" target="_blank" rel="noopener noreferrer">@BiteTheDDDDt</a>
<a href="https://github.com/Bingandbing" target="_blank" rel="noopener noreferrer">@Bingandbing</a>
@BePPPower
@adonis0147</p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.2.1">[Doris 发版通告] Apache Doris 1.2.1 Release</a></h2><div class="blog-info"><time datetime="2023-01-04T00:00:00.000Z" itemprop="datePublished">2023年1月4日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>在 1.2.1 版本中，Doris 团队已经修复了自 1.2.0 版本发布以来约 200 个问题或性能改进项。同时，1.2.1 版本也作为 1.2 LTS 的第一个迭代版本，具备更高的稳定性，建议所有用户升级到这个版本。</p><h1>优化改进</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持高精度小数-decimalv3">支持高精度小数 DecimalV3<a href="#支持高精度小数-decimalv3" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>支持精度更高和性能更好的 DecimalV3，相较于过去版本具有以下优势：</p><ul><li><p>可表示范围更大，取值范围都进行了明显扩充，有效数字范围 <!-- -->[1,38]<!-- -->。</p></li><li><p>性能更高，根据不同精度，占用存储空间可自适应调整。</p></li><li><p>支持更完备的精度推演，对于不同的表达式，应用不同的精度推演规则对结果的精度进行推演。</p></li></ul><p><a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/DECIMALV3" target="_blank" rel="noopener noreferrer">DecimalV3</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持-iceberg-v2">支持 Iceberg V2<a href="#支持-iceberg-v2" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>支持 Iceberg V2 (仅支持 Position Delete， Equality Delete 会在后续版本支持)，可以通过 Multi-Catalog 功能访问 Iceberg V2 格式的表。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持-or-条件转-in">支持 OR 条件转 IN<a href="#支持-or-条件转-in" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>支持将 where 条件表达式后的 or 条件转换成 in 条件，在部分场景中可以提升执行效率。 <a href="https://github.com/apache/doris/pull/15437" target="_blank" rel="noopener noreferrer">#15437</a> <a href="https://github.com/apache/doris/pull/12872" target="_blank" rel="noopener noreferrer">#12872</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="优化-jsonb-类型的导入和查询性能">优化 JSONB 类型的导入和查询性能<a href="#优化-jsonb-类型的导入和查询性能" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>优化 JSONB 类型的导入和查询性能，在测试数据上约有 70% 的性能提升。  <a href="https://github.com/apache/doris/pull/15219" target="_blank" rel="noopener noreferrer">#15219</a>  <a href="https://github.com/apache/doris/pull/15219" target="_blank" rel="noopener noreferrer">#15219</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stream-load-支持带引号的-csv-数据">Stream load 支持带引号的 CSV 数据<a href="#stream-load-支持带引号的-csv-数据" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通过导入任务参数 <code>trim_double_quotes</code> 来控制，默认值为 false，为 true 时表示裁剪掉 CSV 文件每个字段最外层的双引号。  <a href="https://github.com/apache/doris/pull/15241" target="_blank" rel="noopener noreferrer">#15241</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="broker-支持腾讯云-chdfs-和-百度云-bos-afs">Broker 支持腾讯云 CHDFS 和 百度云 BOS 、AFS<a href="#broker-支持腾讯云-chdfs-和-百度云-bos-afs" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>可以通过 Broker 访问存储在腾讯云 CHDFS 和 百度智能云 BOS、AFS 上的数据。 <a href="https://github.com/apache/doris/pull/15297" target="_blank" rel="noopener noreferrer">#15297</a> <a href="https://github.com/apache/doris/pull/15448" target="_blank" rel="noopener noreferrer">#15448</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增函数">新增函数<a href="#新增函数" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>新增函数 <code>substring_index</code>。 <a href="https://github.com/apache/doris/pull/15373" target="_blank" rel="noopener noreferrer">#15373</a></p><h1>问题修复</h1><ul><li><p>修复部分情况下，从 1.1.x 版本升级到 1.2.0 版本后，用户权限信息丢失的问题。 <a href="https://github.com/apache/doris/pull/15144" target="_blank" rel="noopener noreferrer">#15144</a></p></li><li><p>修复使用 date/datetimev2 类型进行分区时，分区值错误的问题。 <a href="https://github.com/apache/doris/pull/15094" target="_blank" rel="noopener noreferrer">#15094</a></p></li><li><p>修复部分已发布功能的 Bug，具体列表可参阅：<a href="https://github.com/apache/doris/pulls?q=is%3Apr+label%3Adev%2F1.2.1-merged+is%3Aclosed" target="_blank" rel="noopener noreferrer">PR List</a></p></li></ul><h1>升级注意事项</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="已知问题">已知问题<a href="#已知问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>请勿使用 JDK11 作为 BE 的运行时 JDK，会导致 BE Crash。</p></li><li><p>该版本对csv格式的读取性能有下降，会影响csv格式的导入和读取效率，我们会在下一个三位版本尽快修复</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="行为改变">行为改变<a href="#行为改变" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>BE 配置项 <code>high_priority_flush_thread_num_per_store</code> 默认值由 1 改成 6 ，以提升 Routine Load 的写入效率。<a href="https://github.com/apache/doris/pull/14775" target="_blank" rel="noopener noreferrer">#14775</a></p></li><li><p>FE 配置项 <code>enable_new_load_scan_node</code> 默认值改为 true ，将使用新的 File Scan Node 执行导入任务，对用户无影响。 <a href="https://github.com/apache/doris/pull/14808" target="_blank" rel="noopener noreferrer">#14808</a></p></li><li><p>删除 FE 配置项 <code>enable_multi_catalog</code>，默认开启 Multi-Catalog 功能。</p></li><li><p>默认强制开启向量化执行引擎。会话变量 <code>enable_vectorized_engine</code> 将不再生效，如需重新生效，需将 FE 配置项 <code>disable_enable_vectorized_engine</code> 设为 false，并重启 FE。 <a href="https://github.com/apache/doris/pull/15213" target="_blank" rel="noopener noreferrer">#15213</a></p></li></ul><h1>致谢</h1><p>有 45 位贡献者参与到 1.2.1 版本的开发与完善中，感谢他们的付出，他们分别是：</p><p>@adonis0147</p><p>@AshinGau</p><p>@BePPPower</p><p>@BiteTheDDDDt</p><p>@ByteYue</p><p>@caiconghui</p><p>@cambyzju</p><p>@chenlinzhong</p><p>@dataroaring</p><p>@Doris-Extras</p><p>@dutyu</p><p>@eldenmoon</p><p>@englefly</p><p>@freemandealer</p><p>@Gabriel39</p><p>@HappenLee</p><p>@Henry2SS</p><p>@hf200012</p><p>@jacktengg</p><p>@Jibing-Li</p><p>@Kikyou1997</p><p>@liaoxin01</p><p>@luozenglin</p><p>@morningman</p><p>@morrySnow</p><p>@mrhhsg</p><p>@nextdreamblue</p><p>@qidaye</p><p>@spaces-X</p><p>@starocean999</p><p>@wangshuo128</p><p>@weizuo93</p><p>@wsjz</p><p>@xiaokang</p><p>@xinyiZzz</p><p>@xutaoustc</p><p>@yangzhg</p><p>@yiguolei</p><p>@yixiutt</p><p>@Yulei-Yang</p><p>@yuxuan-luo</p><p>@zenoyang</p><p>@zhangstar333</p><p>@zhannngchen</p><p>@zhengshengjun</p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.1.5">[Doris 发版通告] Apache Doris 1.1.5 Release</a></h2><div class="blog-info"><time datetime="2022-12-19T00:00:00.000Z" itemprop="datePublished">2022年12月19日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>在 1.1.5 版本中，Doris 团队已经修复了自 1.1.4 版本发布以来约 36 个问题或性能改进项。同时，1.1.5 版本也是作为 1.1 LTS 版本的错误修复版本，建议所有用户升级到这个版本。</p><h1>Behavior Changes</h1><p>当别名与原始列名相同时，例如 &quot;select year(birthday) as birthday&quot;，在 group by、order by、having 子句中使用别名时将与 MySQL 中保持一致，Group by 和 having 将首先使用原始列，order by 将首先使用别名。这里可能会对用户带来疑惑，因此建议最好不要使用与原始列名相同的别名。</p><h1>Features</h1><p>支持 Hash 函数 murmur_hash3_64。<a href="https://github.com/apache/doris/pull/14636" target="_blank" rel="noopener noreferrer">#14636</a></p><h1>Improvements</h1><p>为日期函数 convert_tz 添加时区缓存以提高性能。<a href="https://github.com/apache/doris/pull/14616" target="_blank" rel="noopener noreferrer">#14616</a></p><p>当调用 show 子句时，按 tablename 对结果进行排序。 <a href="https://github.com/apache/doris/pull/14492" target="_blank" rel="noopener noreferrer">#14492</a></p><h1>Bug Fix</h1><p>修复 if 语句中带有常量时导致 BE 可能 Coredump 的问题。<a href="https://github.com/apache/doris/pull/14858" target="_blank" rel="noopener noreferrer">#14858</a></p><p>修复 ColumnVector::insert_date_column 可能崩溃的问题 <a href="https://github.com/apache/doris/pull/14839" target="_blank" rel="noopener noreferrer">#14839</a></p><p>更新 high_priority_flush_thread_num_per_store 默认值为 6，将提高负载性能。 <a href="https://github.com/apache/doris/pull/14775" target="_blank" rel="noopener noreferrer">#14775</a></p><p>优化 quick compaction core。 <a href="https://github.com/apache/doris/pull/14731" target="_blank" rel="noopener noreferrer">#14731</a></p><p>修复分区列非 duplicate key 时 Spark Load 抛出 IndexOutOfBounds 错误的问题。
<a href="https://github.com/apache/doris/pull/14661" target="_blank" rel="noopener noreferrer">#14661</a></p><p>修正 VCollectorIterator 中的内存泄漏问题。 <a href="https://github.com/apache/doris/pull/14549" target="_blank" rel="noopener noreferrer">#14549</a></p><p>修复了存在 Sequence 列时可能存在的建表问题。 <a href="https://github.com/apache/doris/pull/14511" target="_blank" rel="noopener noreferrer">#14511</a></p><p>使用 avg rowset 来计算批量大小，而不是使用 total_bytes，因为它要花费大量的 Cpu。 <a href="https://github.com/apache/doris/pull/14273" target="_blank" rel="noopener noreferrer">#14273</a></p><p>修复了 right outer join 可能导致 core 的问题。<a href="https://github.com/apache/doris/pull/14821" target="_blank" rel="noopener noreferrer">#14821</a></p><p>优化了 TCMalloc gc 的策略。 <a href="https://github.com/apache/doris/pull/14777" target="_blank" rel="noopener noreferrer">#14777</a> <a href="https://github.com/apache/doris/pull/14738" target="_blank" rel="noopener noreferrer">#14738</a> <a href="https://github.com/apache/doris/pull/14374" target="_blank" rel="noopener noreferrer">#14374</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.2.0">[Doris 发版通告] Apache Doris 1.2.0 Release</a></h2><div class="blog-info"><time datetime="2022-12-07T00:00:00.000Z" itemprop="datePublished">2022年12月7日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>亲爱的社区小伙伴们，再一次经历数月的等候后，我们很高兴地宣布，Apache Doris 于 2022 年 12 月 7 日迎来 1.2.0 Release 版本的正式发布！有近 118 位 Contributor 为 Apache Doris 提交了超 2400 项优化和修复，感谢每一位让 Apache Doris 更好的你！</p><p>自从社区正式确立 LTS 版本管理机制后，在 1.1.x 系列版本中不再合入大的功能，仅提供问题修复和稳定性改进，力求满足更多社区用户在稳定性方面的高要求。而在综合考虑版本迭代节奏和用户需求后，我们决定将众多新特性在 1.2 版本中发布，这无疑承载了众多社区用户和开发者的深切期盼，同时这也是一场厚积而薄发后的全面进化！</p><p>在 1.2 版本中，我们实现了全面的向量化、<strong>实现多场景查询性能 3-11 倍的提升</strong>，在 Unique Key 模型上实现了 Merge-on-Write 的数据更新模式、<strong>数据高频更新时查询性能提升达 3-6 倍</strong>，增加了 Multi-Catalog 多源数据目录、<strong>提供了无缝接入 Hive、ES、Hudi、Iceberg 等外部数据源的能力</strong>，引入了 Light Schema Change 轻量表结构变更、<strong>实现毫秒级的 Schema Change 操作并可以借助 Flink CDC 自动同步上游数据库的 DML 和 DDL 操作</strong>，以 JDBC 外部表替换了过去的 ODBC 外部表，支持了 Java UDF 和 Romote UDF 以及 Array 数组类型和 JSONB 类型，修复了诸多之前版本的性能和稳定性问题，推荐大家下载和使用！</p><h1>下载安装</h1><p>GitHub下载：<a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p><p>官网下载页：<a href="https://doris.apache.org/download" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download</a></p><p>源码地址：<a href="https://github.com/apache/doris/releases/tag/1.2.0-rc04" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases/tag/1.2.0-rc04</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="下载说明">下载说明：<a href="#下载说明" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>由于 Apache 服务器文件大小限制，官网下载页的 1.2.0 版本的二进制程序分为三个包：</p><ol><li><p>apache-doris-fe</p></li><li><p>apache-doris-be</p></li><li><p>apache-doris-java-udf-jar-with-dependencies</p></li></ol><p>其中新增的 <code>apache-doris-java-udf-jar-with-dependencies</code> 包用于支持 1.2.0 版本中的 JDBC 外表和 JAVA UDF 。下载后，需要将其中的 <code>java-udf-jar-with-dependencies.jar</code> 文件放到 <code>be/lib</code> 目录下，方可启动 BE，否则无法启动成功。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署说明">部署说明：<a href="#部署说明" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>从历史版本升级到 1.2.0 版本，需完整更新 fe、be 下的 bin 和 lib 目录。</p><p>其他升级注意事项，请完整阅读本发版通告最后一节“升级注意事项”以及安装部署文档 <a href="https://doris.apache.org/zh-CN/docs/dev/install/install-deploy" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/install/install-deploy</a>  和集群升级文档 <a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/cluster-management/upgrade" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/cluster-management/upgrade</a></p><h1>重要更新</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-全面向量化支持性能大幅提升">1. 全面向量化支持，性能大幅提升<a href="#1-全面向量化支持性能大幅提升" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 Apache Doris 1.2.0 版本中，系统所有模块都实现了向量化，包括数据导入、Schema Change、Compaction、数据导出、UDF 等。新版向量化执行引擎具备了完整替换原有非向量化引擎的能力，后续我们也将考虑在未来版本中去除原有非向量化引擎的代码。</p><p>与此同时，在全面向量化的基础上，我们对数据扫描、谓词计算、Aggregation 算子、HashJoin 算子、算子之间 Shuffle 效率等进行了全链路的优化，使得查询性能有了大幅提升。</p><p>我们对 Apache Doris 1.2.0 新版本进行了多个标准测试集的测试，同时选择了 1.1.3 版本和 0.15.0 版本作为对比参照项。经测，1.2.0 <strong>在 SSB-Flat 宽表场景上相对 1.1.3 版本整体性能提升了近 4 倍、相对于 0.15.0 版本性能提升了近 10 倍，在 TPC-H 多表关联场景上较 1.1.3 版本上有近 3 倍的提升、较 0.15.0 版本性能至少提升了 11 倍。</strong></p><p><img loading="lazy" alt="ssb_flat" src="https://cdnd.selectdb.com/zh-CN/assets/images/ssb_flat-a8cfebbc53e6f2db116876e3d53e19c7.png" width="1522" height="674" class="img_ev3q"></p><p><img loading="lazy" alt="tpch" src="https://cdnd.selectdb.com/zh-CN/assets/images/tpch-2048da37571ef8b1d4b0a49c3fba44ca.png" width="1526" height="726" class="img_ev3q"></p><p>同时，我们将 1.2.0 版本的测试数据提交到了全球知名的数据库测试排行榜 ClickBench，在最新的排行榜中，Apache Doris 1.2.0 新版本取得了通用机型（c6a.4xlarge, 500gb gp2）下<strong>查询性能 Cold Run 第二和 Hot Run 第三的醒目成绩，共有 8 个 SQL 刷新榜单最佳成绩、成为新的性能标杆</strong>。导入性能方面，1.2.0 新版本数据写入效率在同机型所有产品中位列第一，压缩前 70G 数据写入仅耗时 415s、单节点写入速度超过 170 MB/s，在实现极致查询性能的同时也保证了高效的写入效率！</p><p><img loading="lazy" alt="coldrun" src="https://cdnd.selectdb.com/zh-CN/assets/images/coldrun-14421295f1be41b3c07f50cbf6ca22da.png" width="1080" height="789" class="img_ev3q"></p><p><img loading="lazy" alt="hotrun" src="https://cdnd.selectdb.com/zh-CN/assets/images/hotrun-775474e22c7de74f0763c3cbca13e377.png" width="1080" height="786" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-在-unique-key-模型上实现了-merge-on-write-的数据更新模式">2. 在 Unique Key 模型上实现了 Merge-on-Write 的数据更新模式<a href="#2-在-unique-key-模型上实现了-merge-on-write-的数据更新模式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在过去版本中， Apache Doris 主要是通过 Unique Key 数据模型来实现数据实时更新的。但由于采用的是 Merge-on-Read 的实现方式，查询存在着效率瓶颈，有大量非必要的 CPU 计算资源消耗和 IO 开销，且可能将出现查询性能抖动等问题。</p><p>在 1.2.0 版本中，我们在原有的 Unique Key 数据模型上，增加了 Merge-on-Write 的数据更新模式。该模式在数据写入时即对需要删除或更新的数据进行标记，始终保证有效的主键只出现在一个文件中（即在写入的时候保证了主键的唯一性），不需要在读取的时候通过归并排序来对主键进行去重，这对于高频写入的场景来说，大大减少了查询执行时的额外消耗。此外还能够支持谓词下推，并能够很好利用 Doris 丰富的索引，在数据  IO 层面就能够进行充分的数据裁剪，大大减少数据的读取量和计算量，因此在很多场景的查询中都有非常明显的性能提升。</p><p>在比较有代表性的 SSB-Flat 数据集上，通过模拟多个持续导入场景，<strong>新版本的大部分查询取得了 3-6 倍的性能提升</strong>。</p><p><img loading="lazy" alt="mergeonwrite_ssb" src="https://cdnd.selectdb.com/zh-CN/assets/images/mergeonwrite_ssb-f76d6e3636efd5bbf53d0d05fdc7d90d.png" width="1280" height="889" class="img_ev3q"></p><p>使用场景：所有对主键唯一性有需求，需要频繁进行实时 Upsert 更新的用户建议打开。</p><p>使用说明：作为新的 Feature 默认关闭，用户可以通过在建表时添加下面的 Property 来开启：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">“enable_unique_key_merge_on_write” = “true”</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>另外新版本 Merge-on-Write 数据更新模式与旧版本 Merge-on-Read 实现方式存在差异，因此已经创建的 Unique Key 表无法直接通过 Alter Table 添加 Property 来支持，只能在新建表的时候指定。如果用户需要将旧表转换到新表，可以使用 <code>insert into new_table select * from old_table</code> 的方式来实现。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-multi-catalog-多源数据目录">3. Multi Catalog 多源数据目录<a href="#3-multi-catalog-多源数据目录" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Multi-Catalog 多源数据目录功能的目标在于能够帮助用户更方便对接外部数据目录，以增强 Apache Doris 的数据湖分析和联邦数据查询能力。</p><p>在过去版本中，当我们需要对接外部数据源时，只能在 Database 或 Table 层级对接。当外部数据目录 Schema 发生变化、或者外部数据目录的 Database 或 Table 非常多时，需要用户手工进行一一映射，维护量非常大。1.2.0 版本新增的多源数据目录功能为 Apache Doris 提供了快速接入外部数据源进行访问的能力，用户可以通过 <code>CREATE CATALOG</code> 命令连接到外部数据源，Doris 会自动映射外部数据源的库、表信息。之后，用户就可以像访问普通表一样，对这些外部数据源中的数据进行访问，避免了之前用户需要对每张表手动建立外表映射的复杂操作。</p><p>目前能支持以下数据源：</p><ol><li><p>Hive Metastore：可以访问包括 Hive、Iceberg、Hudi 在内的数据表，也可对接兼容 Hive Metastore 的数据源，如阿里云的 DataLake Formation，同时支持 HDFS 和对象存储上的数据访问。</p></li><li><p>Elasticsearch：访问 ES 数据源。</p></li><li><p>JDBC：支持通过 JDBC 访问 MySQL 数据源。</p></li></ol><p>注：相应的权限层级也会自动变更，详见“升级注意事项”部分</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/multi-catalog" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/multi-catalog</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-轻量表结构变更-light-schema-change">4. 轻量表结构变更 Light Schema Change<a href="#4-轻量表结构变更-light-schema-change" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在过去版本中，Schema Change 是一项相对消耗比较大的工作，需要对数据文件进行修改，在集群规模和表数据量较大时执行效率会明显降低。同时由于是异步作业，当上游 Schema 发生变更时，需要停止数据同步任务并手动执行 Schema Change，增加开发和运维成本的同时还可能造成消费数据的挤压。</p><p>在 1.2.0 新版本中，对数据表的加减列操作，不再需要同步更改数据文件，仅需在 FE 中更新元数据即可，从而实现毫秒级的 Schema Change 操作，且存在导入任务时效率的提升更为显著。与此同时，使得 Apache Doris 在面对上游数据表维度变化时，可以更加快速稳定实现表结构同步，保证系统的高效且平稳运转。如用户可以通过 Flink CDC，可实现上游数据库到 Doris 的 DML 和 DDL 同步，进一步提升了实时数仓数据处理和分析链路的时效性与便捷性。</p><p><img loading="lazy" alt="lightschemachange_compare.png" src="https://cdnd.selectdb.com/zh-CN/assets/images/lightschemachange_compare-07aee86928ef33271351a31bec3ed9cf.png" width="1280" height="393" class="img_ev3q"></p><p>使用说明：作为新的 Feature 默认关闭，用户可以通过在建表时添加下面的 Property 来开启：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;light_schema_change&quot; = &quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-jdbc-外部表">5. JDBC 外部表<a href="#5-jdbc-外部表" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在过去版本中，Apache Doris 提供了 ODBC 外部表的方式来访问 MySQL、Oracle、SQL Server、PostgreSQL 等数据源，但由于 ODBC 驱动版本问题可能造成系统的不稳定。相对于 ODBC，JDBC 接口更为统一且支持数据库众多，因此在 1.2.0 版本中我们实现了 JDBC 外部表以替换原有的 ODBC 外部表。在新版本中，用户可以通过 JDBC 连接支持 JDBC 协议的外部数据源，</p><p>当前已适配的数据源包括：</p><ul><li>MySQL</li><li>PostgreSQL</li><li>Oracle</li><li>SQLServer</li><li>ClickHouse</li></ul><p>更多数据源的适配已经在规划之中，原则上任何支持 JDBC 协议访问的数据库均能通过 JDBC 外部表的方式来访问。而之前的 ODBC 外部表功能将会在后续的某个版本中移除，还请尽量切换到 JDBC 外表功能。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/jdbc-of-doris/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/jdbc-of-doris/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-java-udf">6. JAVA UDF<a href="#6-java-udf" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在过去版本中，Apache Doris 提供了 C++ 语言的原生 UDF，便于用户通过自己编写自定义函数来满足特定场景的分析需求。但由于原生 UDF 与 Doris 代码耦合度高、当 UDF 出现错误时可能会影响集群稳定性，且只支持 C++ 语言，对于熟悉 Hive、Spark 等大数据技术栈的用户而言存在较高门槛，因此在 1.2.0 新版本我们增加了 Java 语言的自定义函数，支持通过 Java 编写 UDF/UDAF，方便用户在 Java 生态中使用。同时，通过堆外内存、Zero Copy 等技术，使得跨语言的数据访问效率大幅提升。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/ecosystem/udf/java-user-defined-function" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/ecosystem/udf/java-user-defined-function</a></p><p>示例：<a href="https://github.com/apache/doris/tree/master/samples/doris-demo" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/tree/master/samples/doris-demo</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-remote-udf">7. Remote UDF<a href="#7-remote-udf" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>远程 UDF 支持通过 RPC 的方式访问远程用户自定义函数服务，从而彻底消除用户编写 UDF 的语言限制，用户可以使用任意编程语言实现自定义函数，完成复杂的数据分析工作。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/ecosystem/udf/remote-user-defined-function" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/ecosystem/udf/remote-user-defined-function</a></p><p>示例：<a href="https://github.com/apache/doris/tree/master/samples/doris-demo" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/tree/master/samples/doris-demo</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-arrayjsonb-复合数据类型">8. Array/JSONB 复合数据类型<a href="#8-arrayjsonb-复合数据类型" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>Array 类型</li></ul><p>支持了数组类型，同时也支持多级嵌套的数组类型。在一些用户画像，标签等场景，可以利用 Array 类型更好的适配业务场景。同时在新版本中，我们也实现了大量数组相关的函数，以更好的支持该数据类型在实际场景中的应用。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/ARRAY" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/ARRAY</a></p><p>相关函数：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/array-functions/array" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/array-functions/array</a></p><ul><li>JSONB 类型</li></ul><p>支持二进制的 JSON 数据类型 JSONB。该类型提供更紧凑的 JSONB 编码格式，同时提供在编码格式上的数据访问，相比于使用字符串存储的 JSON 数据，有数倍的性能提升。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/JSONB" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/JSONB</a></p><p>相关函数：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/json-functions/jsonb_parse" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/json-functions/jsonb_parse</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-datev2datatimev2-新版日期日期时间数据类型">9. DateV2/DatatimeV2 新版日期/日期时间数据类型<a href="#9-datev2datatimev2-新版日期日期时间数据类型" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>支持 DataV2 日期类型和 DatatimeV2 日期时间类型，相较于原有的 Data 和 Datatime 效率更高且支持最多到微秒的时间精度，建议使用新版日期类型。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/DATETIMEV2/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/DATETIMEV2/</a></p><p>  <a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/DATEV2" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/DATEV2</a></p><p>影响范围：</p><ol><li>用户需要在建表时指定 DateV2 和 DatetimeV2，原有表的 Date 以及 Datetime 不受影响。</li><li>Datev2 和 Datetimev2 在与原来的 Date 和 Datetime 做计算时（例如等值连接），原有类型会被cast 成新类型做计算</li><li>Example 参考文档中说明</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-全新内存管理框架">10. 全新内存管理框架<a href="#10-全新内存管理框架" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 Apache Doris 1.2.0 版本中我们增加了全新的内存跟踪器（Memory Tracker），用以记录 Doris BE 进程内存使用，包括查询、导入、Compaction、Schema Change 等任务生命周期中使用的内存以及各项缓存。通过 Memory Tracker 实现了更加精细的内存监控和控制，大大减少了因内存超限导致的 OOM 问题，使系统稳定性进一步得到提升。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/memory-management/memory-tracker" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/memory-management/memory-tracker</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-table-valued-function-表函数">11. Table Valued Function 表函数<a href="#11-table-valued-function-表函数" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>增加了 Table Valued Function（TVF，表函数），TVF 可以视作一张普通的表，可以出现在 SQL 中所有“表”可以出现的位置，让用户像访问关系表格式数据一样，读取或访问来自 HDFS 或 S3 上的文件内容，</p><p>例如使用 S3 TVF 实现对象存储上的数据导入：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">insert into tbl select * from s3(&quot;s3://bucket/file.*&quot;, &quot;ak&quot; = &quot;xx&quot;, &quot;sk&quot; = &quot;xxx&quot;) where c1 &gt; 2;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者直接查询 HDFS 上的数据文件：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">insert into tbl select * from hdfs(&quot;hdfs://bucket/file.*&quot;) where c1 &gt; 2;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>TVF 可以帮助用户充分利用 SQL 丰富的表达能力，灵活处理各类数据。</p><p>文档：
<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/s3" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/s3</a></p><p><a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/hdfs" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/hdfs</a></p><h1>更多功能</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-更便捷的分区创建方式">1. 更便捷的分区创建方式<a href="#1-更便捷的分区创建方式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>支持通过 <code>FROM TO</code> 命令创建一个时间范围内的多个分区。</p><p>文档搜索“MULTI RANGE”：
<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE</a></p><p>示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 根据时间date 创建分区，支持多个批量逻辑和单独创建分区的混合使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PARTITION BY RANGE(event_day)(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FROM (&quot;2000-11-14&quot;) TO (&quot;2021-11-14&quot;) INTERVAL 1 YEAR,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FROM (&quot;2021-11-14&quot;) TO (&quot;2022-11-14&quot;) INTERVAL 1 MONTH,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FROM (&quot;2022-11-14&quot;) TO (&quot;2023-01-03&quot;) INTERVAL 1 WEEK,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FROM (&quot;2023-01-03&quot;) TO (&quot;2023-01-14&quot;) INTERVAL 1 DAY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PARTITION p_20230114 VALUES [(&#x27;2023-01-14&#x27;), (&#x27;2023-01-15&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 根据时间datetime 创建分区</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PARTITION BY RANGE(event_time)(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FROM (&quot;2023-01-03 12&quot;) TO (&quot;2023-01-14 22&quot;) INTERVAL 1 HOUR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-列重命名">2. 列重命名<a href="#2-列重命名" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>对于开启了 Light Schema Change 的表，支持对列进行重命名。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Alter/ALTER-TABLE-RENAME" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Alter/ALTER-TABLE-RENAME  </a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-更丰富权限管理">3. 更丰富权限管理<a href="#3-更丰富权限管理" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持行级权限</li></ul><p>可以通过 <code>CREATE ROW POLICY</code> 命令创建行级权限。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-POLICY" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-POLICY</a></p><ul><li><p>支持指定密码强度、过期时间等。</p></li><li><p>支持在多次失败登录后锁定账户。</p></li></ul><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Account-Management-Statements/ALTER-USER" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Account-Management-Statements/ALTER-USER</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-导入相关">4. 导入相关<a href="#4-导入相关" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>CSV 导入支持带 header 的 CSV 文件。</li></ul><p>在文档中搜索 <code>csv_with_names</code>：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD/</a></p><ul><li>Stream Load 新增 <code>hidden_columns</code>，可以显式指定 delete flag 列和 sequence 列。</li></ul><p>在文档中搜索 <code>hidden_columns</code>：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD</a></p><ul><li><p>Spark Load 支持 Parquet 和 ORC 文件导入。</p></li><li><p>支持清理已完成的导入的 Label
文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CLEAN-LABEL" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CLEAN-LABEL</a></p></li><li><p>支持通过状态批量取消导入作业
文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CANCEL-LOAD" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CANCEL-LOAD</a></p></li><li><p>Broker Load 新增支持阿里云 OSS，腾讯 CHDFS 和华为云 OBS。</p></li></ul><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/advanced/broker" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/advanced/broker</a></p><ul><li>支持通过 hive-site.xml 文件配置访问 HDFS。</li></ul><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/config/config-dir" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/config/config-dir</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-支持通过-show-catalog-recycle-bin-功能查看回收站中的内容">5. 支持通过 <code>SHOW CATALOG RECYCLE BIN</code> 功能查看回收站中的内容。<a href="#5-支持通过-show-catalog-recycle-bin-功能查看回收站中的内容" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Show-Statements/SHOW-CATALOG-RECYCLE-BIN" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Show-Statements/SHOW-CATALOG-RECYCLE-BIN</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-支持-select--except-语法">6. 支持 <code>SELECT * EXCEPT</code> 语法。<a href="#6-支持-select--except-语法" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/data-table/basic-usage" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/data-table/basic-usage</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-outfile-支持-orc-格式导出并且支持多字节分隔符">7. OUTFILE 支持 ORC 格式导出，并且支持多字节分隔符。<a href="#7-outfile-支持-orc-格式导出并且支持多字节分隔符" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/OUTFILE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/OUTFILE</a></p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/OUTFILE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/OUTFILE</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-支持通过配置修改可保存的-query-profile-的数量">8. 支持通过配置修改可保存的 Query Profile 的数量。<a href="#8-支持通过配置修改可保存的-query-profile-的数量" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档搜索 FE 配置项：<code>max_query_profile_num</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-delete-语句支持-in-谓词条件并且支持分区裁剪">9. DELETE 语句支持 IN 谓词条件。并且支持分区裁剪。<a href="#9-delete-语句支持-in-谓词条件并且支持分区裁剪" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/DELETE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/DELETE</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-时间列的默认值支持使用-current_timestamp">10. 时间列的默认值支持使用 <code>CURRENT_TIMESTAMP</code><a href="#10-时间列的默认值支持使用-current_timestamp" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档中搜索 &quot;CURRENT_TIMESTAMP&quot;：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-添加两张系统表backendsrowsets">11. 添加两张系统表：backends、rowsets<a href="#11-添加两张系统表backendsrowsets" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>backends 是 Doris 中内置系统表，存放在 information_schema 数据库下，通过该系统表可以查看当前 Doris 集群中的 BE 节点信息。</p><p>rowsets 是 Doris 中内置系统表，存放在 information_schema 数据库下，通过该系统表可以查看 Doris 集群中各个 BE 节点当前 rowsets 情况。</p><p>文档：</p><p><a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/backends" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/backends</a></p><p><a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/rowsets" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/rowsets</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-备份恢复">12. 备份恢复<a href="#12-备份恢复" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>Restore作业支持 <code>reserve_replica</code> 参数，使得恢复后的表的副本数和备份时一致。</p></li><li><p>Restore 作业支持 <code>reserve_dynamic_partition_enable</code> 参数，使得恢复后的表保持动态分区开启状态。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/RESTORE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/RESTORE</a></p></li><li><p>支持通过内置的 libhdfs 进行备份恢复操作，不再依赖 broker。</p><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-支持同机多磁盘之间的数据均衡">13. 支持同机多磁盘之间的数据均衡<a href="#13-支持同机多磁盘之间的数据均衡" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档：</p><p><a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-REBALANCE-DISK" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-REBALANCE-DISK</a></p><p><a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-CANCEL-REBALANCE-DISK" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-CANCEL-REBALANCE-DISK</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-routine-load-支持订阅-kerberos-认证的-kafka-服务">14. Routine Load 支持订阅 Kerberos 认证的 Kafka 服务。<a href="#14-routine-load-支持订阅-kerberos-认证的-kafka-服务" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>文档中搜索 kerberos：<a href="https://doris.apache.org/zh-CN/docs/dev/data-operate/import/import-way/routine-load-manual" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/data-operate/import/import-way/routine-load-manual</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="15-new-built-in-function-新增内置函数">15. New built-in-function 新增内置函数<a href="#15-new-built-in-function-新增内置函数" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>  新增以下内置函数:</p><ul><li>cbrt</li><li>sequence_match/sequence_count </li><li>mask/mask_first_n/mask_last_n</li><li>elt</li><li>any/any_value</li><li>group_bitmap_xor</li><li>ntile</li><li>nvl</li><li>uuid</li><li>initcap</li><li>regexp_replace_one/regexp_extract_all</li><li>multi_search_all_positions/multi_match_any</li><li>domain/domain_without_www/protocol</li><li>running_difference</li><li>bitmap_hash64</li><li>murmur_hash3_64</li><li>to_monday</li><li>not_null_or_empty</li><li>window_funnel</li><li>outer combine
以及所有 Array 函数</li></ul><h1>升级注意事项</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fe-元数据版本变更-重要">FE 元数据版本变更 【重要】<a href="#fe-元数据版本变更-重要" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>FE Meta Version 由 107 变更为 114，因此从 1.1.x 以及更早版本升级至 1.2.0 版本后，不可回滚到之前版本。
升级过程中，建议通过灰度升级的方式，先升级部分节点并观察业务运行情况，以降低升级风险，若执行非法的回滚操作将可能导致数据丢失与损坏。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="行为改变">行为改变<a href="#行为改变" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>权限层级变更。</p><p>因为引入了 Catalog 层级，所以相应的用户权限层级也会自动变更。规则如下：</p><ul><li>GlobalPrivs 和 ResourcePrivs 保持不变</li><li>新增 CatalogPrivs 层级。</li><li>原 DatabasePrivs 层级增加 internal 前缀（表示 internal catalog 中的 db）</li><li>原 TablePrivs 层级增加 internal 前缀（表示internal catalog中的 tbl）</li></ul></li><li><p>GroupBy 和 Having 子句中，优先使用列名而不是别名进行匹配。</p></li><li><p>不再支持创建以 &quot;mv<em>&quot; 开头的列。&quot;mv</em>&quot; 是物化视图中的保留关键词</p></li><li><p>移除了 order by 语句默认添加的 65535 行的 Limit 限制，并增加 Session 变量 <code>default_order_by_limit</code> 可以自定配置这个限制。</p></li><li><p>&quot;Create Table As Select&quot; 生成的表，所有字符串列统一使用 String类型，不再区分 varchar/char/string </p></li><li><p>audit log 中，移除 db 和 user 名称前的 <code>default_cluster</code> 字样。</p></li><li><p>audit log 中增加 sql digest 字段</p></li><li><p>union 子句总 order by 逻辑变动。新版本中，order by 子句将在 union 执行完成后执行，除非通过括号进行显式的关联。</p></li><li><p>进行 decommission 操作时，会忽略回收站中的 tablet，确保 decomission 能够完成。</p></li><li><p>Decimal 的返回结果将按照原始列中声明的精度进行显示 ，或者按照显式指定的 cast 函数中的精度进行展示。</p></li><li><p>列名的长度限制由 64 变更为 256</p></li><li><p>FE 配置项变动</p><ul><li>默认开启 <code>enable_vectorized_load</code> 参数。</li><li>增大了 <code>create_table_timeout</code> 值。建表操作的默认超时时间将增大。 </li><li>修改 <code>stream_load_default_timeout_second</code> 默认值为 3天。</li><li>修改<code>alter_table_timeout_second</code> 的默认值为 一个月。</li><li>增加参数 <code>max_replica_count_when_schema_change</code> 用于限制 alter 作业中涉及的 replica数量，默认为100000。</li><li>添加 <code>disable_iceberg_hudi_table</code>。默认禁用了 iceberg 和 hudi 外表，推荐使用 multi catalog功能。</li></ul></li><li><p>BE 配置项变动</p><ul><li>移除了 <code>disable_stream_load_2pc</code> 参数。2PC的stream load可直接使用。</li><li>修改<code>tablet_rowset_stale_sweep_time_sec</code> ，从1800秒修改为 300 秒。</li></ul></li><li><p>Session变量变动</p><ul><li>修改变量 <code>enable_insert_strict</code> 默认为 true。这会导致一些之前可以执行，但是插入了非法值的insert操作，不再能够执行。</li><li>修改变量 <code>enable_local_exchange</code> 默认为 true </li><li>默认通过 lz4 压缩进行数据传输，通过变量 <code>fragment_transmission_compression_codec</code> 控制 </li><li>增加 <code>skip_storage_engine_merge</code> 变量，用于调试 unique 或 agg 模型的数据
文档：<a href="https://doris.apache.org/zh-CN/docs/dev/advanced/variables" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/advanced/variables</a></li></ul></li><li><p>BE 启动脚本会通过 <code>/proc/sys/vm/max_map_count</code> 检查数值是否大于200W，否则启动失败。</p></li><li><p>移除了 mini load 接口</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="升级过程中需注意">升级过程中需注意<a href="#升级过程中需注意" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li>升级准备</li></ol><ul><li>需替换：lib, bin 目录（start/stop 脚本均有修改）</li><li>BE 也需要配置 JAVA_HOME，已支持 JDBC Table 和 Java UDF。</li><li>fe.conf 中默认 JVM Xmx 参数修改为 8GB。</li></ul><ol start="2"><li>升级过程中可能的错误</li></ol><ul><li>repeat 函数不可使用并报错：<code>vectorized repeat function cannot be executed</code>，可以在升级前先关闭向量化执行引擎。</li><li>schema change 失败并报错：<code>desc_tbl is not set. Maybe the FE version is not equal to the BE</code></li><li>向量化 hash join 不可使用并报错。<code>vectorized hash join cannot be executed</code>。可以在升级前先关闭向量化执行引擎。</li></ul><p>以上错误在完全升级后会恢复正常。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="性能影响">性能影响<a href="#性能影响" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>默认使用 JeMalloc 作为新版本 BE 的内存分配器，替换 TcMalloc 。</li></ul><p>JeMalloc 相比 TcMalloc 使用的内存更少、高并发场景性能更高，但在内存充足的性能测试时，TcMalloc 比 JeMalloc 性能高5%-10%，详细测试见: <a href="https://github.com/apache/doris/pull/12496" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/pull/12496</a></p><ul><li>tablet sink 中的 batch size 修改为至少 8K。</li><li>默认关闭 Page Cache 和 减少 Chunk Allocator 预留内存大小</li></ul><p>Page Cache 和 Chunk Allocator 分别缓存用户数据块和内存预分配，这两个功能会占用一定比例的内存并且不会释放。由于这部分内存占用无法灵活调配，导致在某些场景下可能因这部分内存占用而导致其他任务内存不足，影响系统稳定性和可用性，因此新版本中默认关闭了这两个功能。</p><p>但在某些延迟敏感的报表场景下，关闭该功能可能会导致查询延迟增加。如用户担心升级后该功能对业务造成影响，可以通过在 be.conf 中增加以下参数以保持和之前版本行为一致。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">disable_storage_page_cache=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chunk_reserved_bytes_limit=10%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-变化">API 变化<a href="#api-变化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>BE 的 http api 错误返回信息，由 <code>{&quot;status&quot;: &quot;Fail&quot;, &quot;msg&quot;: &quot;xxx&quot;}</code> 变更为更具体的 <code>{&quot;status&quot;: &quot;Not found&quot;, &quot;msg&quot;: &quot;Tablet not found. tablet_id=1202&quot;}</code></p></li><li><p><code>SHOW CREATE TABLE</code> 中， comment的内容由双引号包裹变为单引号包裹</p></li><li><p>支持普通用户通过 http 命令获取 query profile。</p></li></ul><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/manager/query-profile-action" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/manager/query-profile-action</a></p><ul><li>优化了 sequence 列的指定方式，可以直接指定列名。</li></ul><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/data-operate/update-delete/sequence-column-manual" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/data-operate/update-delete/sequence-column-manual</a></p><ul><li><code>show backends</code> 和 <code>show tablets</code> 返回结果中，增加远端存储的空间使用情况 (#11450)</li><li>移除了 Num-Based Compaction 相关代码(#13409)</li><li>重构了BE的错误码机制，部分返回的错误信息会发生变化(#8855)</li></ul><h1>其他</h1><ul><li>支持Docker 官方镜像。</li><li>支持在 MacOS(x86/M1) 和 ubuntu-22.04 上编译 Doris</li><li>支持进行image 文件的校验。</li></ul><p>文档搜索“--image”：<a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/metadata-operation" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/metadata-operation</a></p><ul><li>脚本相关<ul><li>FE、BE 的 stop 脚本支持通过 <code>--grace</code> 参数退出FE、BE（使用 kill -15 信号代替 kill -9）</li><li>FE start 脚本支持通过 --version 查看当前FE 版本(#11563)</li></ul></li><li>支持通过 <code>ADMIN COPY TABLET</code> 命令获取某个 tablet 的数据和相关建表语句，用于本地问题调试 </li></ul><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-COPY-TABLET" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-COPY-TABLET</a></p><ul><li>支持通过 http api，获取一个SQL语句相关的 建表语句，用于本地问题复现</li></ul><p>文档：<a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/query-schema-action" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/query-schema-action</a></p><ul><li>支持建表时关闭这个表的 compaction 功能，用于测试 </li></ul><p>文档中搜索 &quot;disble_auto_compaction&quot;：<a href="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE</a></p><h1>致谢</h1><p>Apache Doris 1.2.0 版本的发布离不开所有社区用户的支持，在此向所有参与版本设计、开发、测试、讨论的社区贡献者们表示感谢，他们分别是（首字母排序）：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@924060929</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@a19920714liou</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@adonis0147</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Aiden-Dong</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@aiwenmo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AshinGau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@b19mud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@BePPPower</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@BiteTheDDDDt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@bridgeDream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ByteYue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@caiconghui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@CalvinKirs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@cambyzju</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@caoliang-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@carlvinhust2012</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@catpineapple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ccoffline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@chenlinzhong</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@chovy-3012</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@coderjiang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@cxzl25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dataalive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dataroaring</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dependabot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dinggege1024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DongLiang-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Doris-Extras</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@eldenmoon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EmmyMiao87</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@englefly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@FreeOnePlus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Gabriel39</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@gaodayue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@geniusjoe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@gj-zhang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@gnehil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@GoGoWen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@HappenLee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@hello-stephen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Henry2SS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@hf200012</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@huyuanfeng2018</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@jacktengg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@jackwener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@jeffreys-cat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Jibing-Li</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JNSimba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Kikyou1997</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Lchangliang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@LemonLiTree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@lexoning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@liaoxin01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@lide-reed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@link3280</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@liutang123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@liuyaolin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@LOVEGISER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@lsy3993</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@luozenglin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@luzhijing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@madongz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morningman</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morningman-cmy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morrySnow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@mrhhsg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Myasuka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@myfjdthink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@nextdreamblue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@pan3793</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@pangzhili</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@pengxiangyu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@platoneko</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@qidaye</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@qzsee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SaintBacchus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SeekingYang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@smallhibiscus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sohardforaname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@song7788q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@spaces-X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ssusieee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@stalary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@starocean999</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SWJTU-ZhangLei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TaoZex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@timelxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Wahno</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangshuo128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangyf0555</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@weizhengte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@weizuo93</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wsjz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wunan1210</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xhmz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xiaokang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xiaokangguo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xinyiZzz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xy720</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yangzhg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Yankee24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yeyudefeng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yiguolei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yinzhijian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yixiutt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yuanyuan8983</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zbtzbtzbt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zenoyang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhangboya1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhangstar333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhannngchen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ZHbamboo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhengshiJ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhenhb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhqu1148980644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zuochunwei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zy-kkk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.1.4">[Doris 发版通告] Apache Doris 1.1.4 Release</a></h2><div class="blog-info"><time datetime="2022-11-11T00:00:00.000Z" itemprop="datePublished">2022年11月11日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>作为 1.1 LTS（Long-term Support，长周期支持）版本基础之上的 Bugfix 版本，在 Apache Doris 1.1.4 版本中，Doris 团队修复了自 1.1.3 版本以来的约 60 个 Issue 或性能优化项。改进了 Spark Load 的使用体验，优化了诸多内存以及 BE 异常宕机的问题，系统稳定性和性能得以进一步加强，推荐所有用户下载和使用。</p><h1>新增功能</h1><ul><li><p>Broker Load 支持 华为云 OBS 对象存储。<a href="https://github.com/apache/doris/pull/13523" target="_blank" rel="noopener noreferrer">#13523</a></p></li><li><p>Spark Load 支持 Parquet 和 Orc 文件。<a href="https://github.com/apache/doris/pull/13438" target="_blank" rel="noopener noreferrer">#13438</a></p></li></ul><h1>优化改进</h1><ul><li>禁用 Metric Hook 中的互斥量，其将影响数据导入过程中的查询性能。 <a href="https://github.com/apache/doris/pull/10941" target="_blank" rel="noopener noreferrer">#10941</a></li></ul><h1>Bug 修复</h1><ul><li><p>修复了当 Spark Load 加载文件时 Where 条件不生效的问题。 <a href="https://github.com/apache/doris/pull/13804" target="_blank" rel="noopener noreferrer">#13804</a></p></li><li><p>修复了 If 函数存在 Nullable 列时开启向量化返回错误结果的问题。 <a href="https://github.com/apache/doris/pull/13779" target="_blank" rel="noopener noreferrer">#13779</a></p></li><li><p>修复了在使用 Anti Join 和其他 Join 谓词时产生错误结果的问题。 <a href="https://github.com/apache/doris/pull/13743" target="_blank" rel="noopener noreferrer">#13743</a></p></li><li><p>修复了当调用函数 concat(ifnull)时 BE 宕机的问题。 <a href="https://github.com/apache/doris/pull/13693" target="_blank" rel="noopener noreferrer">#13693</a></p></li><li><p>修复了 group by 语句中存在函数时 planner 错误的问题。 <a href="https://github.com/apache/doris/pull/13613" target="_blank" rel="noopener noreferrer">#13613</a></p></li><li><p>修复了 lateral view 语句不能正确识别表名和列名的问题。 <a href="https://github.com/apache/doris/pull/13600" target="_blank" rel="noopener noreferrer">#13600</a></p></li><li><p>修复了使用物化视图和表别名时出现未知列的问题。 <a href="https://github.com/apache/doris/pull/13605" target="_blank" rel="noopener noreferrer">#13605</a></p></li><li><p>修复了 JSONReader 无法释放值和解析 allocator 内存的问题。 <a href="https://github.com/apache/doris/pull/13513" target="_blank" rel="noopener noreferrer">#13513</a></p></li><li><p>修复了当 enable_vectorized_alter_table 为 true 时允许使用 to_bitmap() 对负值列创建物化视图的问题。 <a href="https://github.com/apache/doris/pull/13448" target="_blank" rel="noopener noreferrer">#13448</a></p></li><li><p>修复了函数 from_date_format_str 中微秒数丢失的问题。 <a href="https://github.com/apache/doris/pull/13446" target="_blank" rel="noopener noreferrer">#13446</a></p></li><li><p>修复了排序 exprs 的 nullability 属性在使用子 smap 信息进行替换后可能不正确的问题。 <a href="https://github.com/apache/doris/pull/13328" target="_blank" rel="noopener noreferrer">#13328</a></p></li><li><p>修复了 case when 有 1000 个条件时出现 Core 的问题。 <a href="https://github.com/apache/doris/pull/13315" target="_blank" rel="noopener noreferrer">#13315</a></p></li><li><p>修复了 Stream Load 导入数据时最后一行数据丢失的问题。 <a href="https://github.com/apache/doris/pull/13066" target="_blank" rel="noopener noreferrer">#13066</a></p></li><li><p>恢复表或分区的副本数与备份前相同。 <a href="https://github.com/apache/doris/pull/11942" target="_blank" rel="noopener noreferrer">#11942</a></p></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.1.3">[Doris 发版通告] Apache Doris 1.1.3 Release</a></h2><div class="blog-info"><time datetime="2022-10-17T00:00:00.000Z" itemprop="datePublished">2022年10月17日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>作为 1.1.2 LTS（Long-term Support，长周期支持）版本基础之上的 Bugfix 版本，在 Apache Doris 1.1.3 版本中，有超过 80 个 Issue 或性能优化项被合入，优化了在导入或查询过程中的内存控制，修复了许多导致 BE Core 以及产生错误查询结果的问题，系统稳定性和性能得以进一步加强，推荐所有用户下载和使用。</p><h1>新增功能</h1><ul><li><p>在 ODBC 表中支持 SQLServer 和 PostgreSQL 的转义标识符。</p></li><li><p>支持使用 Parquet 作为导出文件格式。</p></li></ul><h1>优化改进</h1><ul><li><p>优化了 Flush 策略以及避免过多 Segment 小文件。 <a href="https://github.com/apache/doris/pull/12706" target="_blank" rel="noopener noreferrer">#12706</a> <a href="https://github.com/apache/doris/pull/12716" target="_blank" rel="noopener noreferrer">#12716</a></p></li><li><p>重构 Runtime Filter 以减少初始准备时间。 <a href="https://github.com/apache/doris/pull/13127" target="_blank" rel="noopener noreferrer">#13127</a></p></li><li><p>修复了若干个在查询或导入过程中的内存控制问题。 <a href="https://github.com/apache/doris/pull/12682" target="_blank" rel="noopener noreferrer">#12682</a> <a href="https://github.com/apache/doris/pull/12688" target="_blank" rel="noopener noreferrer">#12688</a> <a href="https://github.com/apache/doris/pull/12708" target="_blank" rel="noopener noreferrer">#12708</a> <a href="https://github.com/apache/doris/pull/12776" target="_blank" rel="noopener noreferrer">#12776</a> <a href="https://github.com/apache/doris/pull/12782" target="_blank" rel="noopener noreferrer">#12782</a> <a href="https://github.com/apache/doris/pull/12791" target="_blank" rel="noopener noreferrer">#12791</a> <a href="https://github.com/apache/doris/pull/12794" target="_blank" rel="noopener noreferrer">#12794</a> <a href="https://github.com/apache/doris/pull/12820" target="_blank" rel="noopener noreferrer">#12820</a> <a href="https://github.com/apache/doris/pull/12932" target="_blank" rel="noopener noreferrer">#12932</a> <a href="https://github.com/apache/doris/pull/12954" target="_blank" rel="noopener noreferrer">#12954</a> <a href="https://github.com/apache/doris/pull/12951" target="_blank" rel="noopener noreferrer">#12951</a></p></li></ul><h1>Bug 修复</h1><ul><li><p>修复了 largeint 类型在 Compaction 过程中导致 Core 的问题。 <a href="https://github.com/apache/doris/pull/10094" target="_blank" rel="noopener noreferrer">#10094</a></p></li><li><p>修复了 Grouping set 导致 BE Core 或者返回错误结果的问题。 <a href="https://github.com/apache/doris/pull/12313" target="_blank" rel="noopener noreferrer">#12313</a></p></li><li><p>修复了使用 orthogonal_bitmap_union_count 函数时执行计划 PREAGGREGATION 显示错误的问题。 <a href="https://github.com/apache/doris/pull/12581" target="_blank" rel="noopener noreferrer">#12581</a></p></li><li><p>修复了 Level1Iterator 未被释放导致的内存泄漏问题。 <a href="https://github.com/apache/doris/pull/12592" target="_blank" rel="noopener noreferrer">#12592</a></p></li><li><p>修复了当 2 BE 且存在 Colocation 表时通过 Decommission 下线节点失败的问题。 <a href="https://github.com/apache/doris/pull/12644" target="_blank" rel="noopener noreferrer">#12644</a></p></li><li><p>修复了 TBrokerOpenReaderResponse 过大时导致堆栈缓冲区溢出而导致的 BE Core 问题。 <a href="https://github.com/apache/doris/pull/12658" target="_blank" rel="noopener noreferrer">#12658</a></p></li><li><p>修复了出现 -238错误时 BE 节点可能 OOM 的问题。 <a href="https://github.com/apache/doris/pull/12666" target="_blank" rel="noopener noreferrer">#12666</a></p></li><li><p>修复了 LEAD() 函数错误子表达式的问题。 <a href="https://github.com/apache/doris/pull/12587" target="_blank" rel="noopener noreferrer">#12587</a></p></li><li><p>修复了行存代码中相关查询失败的问题。 <a href="https://github.com/apache/doris/pull/12712" target="_blank" rel="noopener noreferrer">#12712</a></p></li><li><p>修复了 curdate()/current_date() 函数产生错误结果的问题。 <a href="https://github.com/apache/doris/pull/12720" target="_blank" rel="noopener noreferrer">#12720</a></p></li><li><p>修复了 lateral View explode_split 函数出现错误结果的问题。 <a href="https://github.com/apache/doris/pull/13643" target="_blank" rel="noopener noreferrer">#13643</a></p></li><li><p>修复了两张相同表中 Bucket Shuffle Join 计划错误的问题。 <a href="https://github.com/apache/doris/pull/12930" target="_blank" rel="noopener noreferrer">#12930</a></p></li><li><p>修复了更新或导入过程中 Tablet 版本可能错误的问题。 <a href="https://github.com/apache/doris/pull/13070" target="_blank" rel="noopener noreferrer">#13070</a></p></li><li><p>修复了在加密函数下使用 Broker 导入数据时 BE 可能发生 Core 的问题。 <a href="https://github.com/apache/doris/pull/13009" target="_blank" rel="noopener noreferrer">#13009</a></p></li></ul><h1>升级说明</h1><p>默认情况下禁用 PageCache 和 ChunkAllocator 以减少内存使用，用户可以通过修改配置项 <code>disable_storage_page_cache</code> 和 <code>chunk_reserved_bytes_limit</code> 来重新启用。</p><p>Storage Page Cache 和 Chunk Allocator 分别缓存用户数据块和内存预分配。</p><p>这两个功能会占用一定比例的内存，并且不会释放。 这部分内存占用无法灵活调配，导致在某些场景下，因这部分内存占用而导致其他任务内存不足，影响系统稳定性和可用性。因此我们在 1.1.3 版本中默认关闭了这两个功能。</p><p>但在某些延迟敏感的报表场景下，关闭该功能可能会导致查询延迟增加。如用户担心升级后该功能对业务造成影响，可以通过在 be.conf 中增加以下参数以保持和之前版本行为一致。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">disable_storage_page_cache=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chunk_reserved_bytes_limit=10%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>disable_storage_page_cache</code>：是否关闭 Storage Page Cache。 1.1.2（含）之前的版本，默认是false，即打开。1.1.3 版本默认为 true，即关闭。</li><li><code>chunk_reserved_bytes_limit</code>：Chunk allocator 预留内存大小。1.1.2（含）之前的版本，默认是整体内存的 10%。1.1.3 版本默认为 209715200（200MB）。</li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.1.2">[Doris 发版通告] Apache Doris 1.1.2 Release</a></h2><div class="blog-info"><time datetime="2022-09-13T00:00:00.000Z" itemprop="datePublished">2022年9月13日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>在 Apache Doris 1.1.2 版本中，我们引入了新的 Memtracker、极大程度上避免 OOM 类问题的发生，提升了向量化执行引擎在多数查询场景的性能表现，修复了诸多导致 BE 和 FE 发生异常的问题，优化了在湖仓联邦查询场景的部分体验问题并提升访问外部数据的性能。</p><p>相较于 1.1.1 版本，在 1.1.2 版本中有超过 170 个 Issue 和性能优化项被合入，系统稳定性和性能都得到进一步加强。与此同时，1.1.2 版本还将作为 Apache Doris 首个 LTS （Long-term Support）长周期支持版本，后续长期维护和支持，推荐所有用户下载和升级。</p><h1>新增功能</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memtracker">MemTracker<a href="#memtracker" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>MemTracker 是一个用于分析内存使用情况的统计工具，在 1.1.1 版本中我们引入了简易版 Memtracker 用以控制 BE 侧内存。在 1.1.2 版本中，我们引入了新的 MemTracker，在向量化执行引擎和非向量化执行引擎中都更为准确。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="增加展示和取消正在执行-query-的-api">增加展示和取消正在执行 Query 的 API<a href="#增加展示和取消正在执行-query-的-api" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><code>GET /rest/v2/manager/query/current_queries</code></p><p><code>GET /rest/v2/manager/query/kill/{query_id}</code></p><p>具体使用参考文档 <a href="https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/manager/query-profile-action?_highlight=current&amp;_highlight=query#request" target="_blank" rel="noopener noreferrer">Query Profile Action</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持读写-emoji-表情通过-odbc-外表">支持读写 Emoji 表情通过 ODBC 外表<a href="#支持读写-emoji-表情通过-odbc-外表" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h1>优化改进</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据湖相关改进">数据湖相关改进<a href="#数据湖相关改进" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>扫描 HDFS ORC 文件时性能提升约 300%。<a href="https://github.com/apache/doris/pull/11501" target="_blank" rel="noopener noreferrer">#11501</a></p></li><li><p>查询 Iceberg 表支持 HDFS 的 HA 模式。</p></li><li><p>支持查询由 <a href="https://tez.apache.org/" target="_blank" rel="noopener noreferrer">Apache Tez</a> 创建的 Hive 数据</p></li><li><p>添加阿里云 OSS 作为 Hive 外部支持</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在-spark-load-中增加对-string-字符串类型和-text-文本类型的支持">在 Spark Load 中增加对 String 字符串类型和 Text 文本类型的支持<a href="#在-spark-load-中增加对-string-字符串类型和-text-文本类型的支持" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在非向量化引擎支持复用-block在某些场景中有-50性能提升11392">在非向量化引擎支持复用 Block，在某些场景中有 50%性能提升。<a href="https://github.com/apache/doris/pull/11392" target="_blank" rel="noopener noreferrer">#11392</a><a href="#在非向量化引擎支持复用-block在某些场景中有-50性能提升11392" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="提升-like-和正则表达式的性能">提升 Like 和正则表达式的性能<a href="#提升-like-和正则表达式的性能" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="禁用-tcmalloc-的-aggressive_memory_decommit">禁用 TCMalloc 的 aggressive_memory_decommit。<a href="#禁用-tcmalloc-的-aggressive_memory_decommit" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在查询或导入时将会有 40% 性能提升，也可以在配置文件中通过 <code>tc_enable_aggressive_memory_decommit</code>来修改</p><h1>Bug Fix</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复部分可能导致-fe-失败或者数据损坏的问题">修复部分可能导致 FE 失败或者数据损坏的问题<a href="#修复部分可能导致-fe-失败或者数据损坏的问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>在 HA 环境中，BDBJE 将保留尽可能多的文件，通过增加配置 <code>bdbje_reserved_disk_bytes </code>以避免产生太多的 BDBJE 文件，BDBJE 日志只有在接近磁盘限制时才会删除。</p></li><li><p>修复了 BDBJE 中的重要错误，该错误将导致 FE 副本无法正确启动或数据损坏。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-fe-在查询过程中会在-waitfor_rpc-上-hang-住以及-be-在高并发情况下会-hang-住的问题">修复 FE 在查询过程中会在 waitFor_rpc 上 Hang 住以及 BE 在高并发情况下会 Hang 住的问题。<a href="#修复-fe-在查询过程中会在-waitfor_rpc-上-hang-住以及-be-在高并发情况下会-hang-住的问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><a href="https://github.com/apache/doris/pull/12459" target="_blank" rel="noopener noreferrer">#12459</a> <a href="https://github.com/apache/doris/pull/12458" target="_blank" rel="noopener noreferrer">#12458</a> <a href="https://github.com/apache/doris/pull/12392" target="_blank" rel="noopener noreferrer">#12392</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复向量化执行引擎查询时得到错误结果的问题">修复向量化执行引擎查询时得到错误结果的问题。<a href="#修复向量化执行引擎查询时得到错误结果的问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><a href="https://github.com/apache/doris/pull/11754" target="_blank" rel="noopener noreferrer">#11754</a> <a href="https://github.com/apache/doris/pull/11694" target="_blank" rel="noopener noreferrer">#11694</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复许多-planner-导致-be-core-或者处于不正常状态的问题">修复许多 Planner 导致 BE Core 或者处于不正常状态的问题。<a href="#修复许多-planner-导致-be-core-或者处于不正常状态的问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><a href="https://github.com/apache/doris/pull/12080" target="_blank" rel="noopener noreferrer">#12080</a> <a href="https://github.com/apache/doris/pull/12075" target="_blank" rel="noopener noreferrer">#12075</a> <a href="https://github.com/apache/doris/pull/12040" target="_blank" rel="noopener noreferrer">#12040</a> <a href="https://github.com/apache/doris/pull/12003" target="_blank" rel="noopener noreferrer">#12003</a> <a href="https://github.com/apache/doris/pull/12007" target="_blank" rel="noopener noreferrer">#12007</a> <a href="https://github.com/apache/doris/pull/11971" target="_blank" rel="noopener noreferrer">#11971</a> <a href="https://github.com/apache/doris/pull/11933" target="_blank" rel="noopener noreferrer">#11933</a> <a href="https://github.com/apache/doris/pull/11861" target="_blank" rel="noopener noreferrer">#11861</a> <a href="https://github.com/apache/doris/pull/11859" target="_blank" rel="noopener noreferrer">#11859</a> <a href="https://github.com/apache/doris/pull/11855" target="_blank" rel="noopener noreferrer">#11855</a> <a href="https://github.com/apache/doris/pull/11837" target="_blank" rel="noopener noreferrer">#11837</a> <a href="https://github.com/apache/doris/pull/11834" target="_blank" rel="noopener noreferrer">#11834</a> <a href="https://github.com/apache/doris/pull/11821" target="_blank" rel="noopener noreferrer">#11821</a> <a href="https://github.com/apache/doris/pull/11782" target="_blank" rel="noopener noreferrer">#11782</a> <a href="https://github.com/apache/doris/pull/11723" target="_blank" rel="noopener noreferrer">#11723</a> <a href="https://github.com/apache/doris/pull/11569" target="_blank" rel="noopener noreferrer">#11569</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-1.1.1">[Doris 发版通告] Apache Doris 1.1.1 Release</a></h2><div class="blog-info"><time datetime="2022-07-29T00:00:00.000Z" itemprop="datePublished">2022年7月29日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="新增功能">新增功能<a href="#新增功能" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="向量化执行引擎支持-odbc-sink">向量化执行引擎支持 ODBC Sink。<a href="#向量化执行引擎支持-odbc-sink" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 1.1.0 版本的向量化执行引擎中 ODBC Sink 是不支持的，而这一功能在之前版本的行存引擎是支持的，因此在 1.1.1 版本中我们重新完善了这一功能。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="增加简易版-memtracker">增加简易版 MemTracker<a href="#增加简易版-memtracker" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>MemTracker 是一个用于分析内存使用情况的统计工具，在 1.1.0 版本的向量化执行引擎中，由于 BE 侧没有 MemTracker，可能出现因内存失控导致的 OOM 问题。在 1.1.1 版本中，BE 侧增加了一个简易版 MemTracker，可以帮助控制内存，并在内存超出时取消查询。</p><p>完整版 MemTracker 将在 1.1.2 版本中正式发布。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="改进">改进<a href="#改进" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持在-page-cache-中缓存解压后数据">支持在 Page Cache 中缓存解压后数据。<a href="#支持在-page-cache-中缓存解压后数据" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 Page Cache 中有些数据是用 bitshuffle 编码方式压缩的，在查询过程中需要花费大量的时间来解压。在 1.1.1 版本中，Doris 将缓存解压由 bitshuffle 编码的数据以加速查询，我们发现在 ssb-flat 的一些查询中，可以减少 30% 的延时。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-修复">Bug 修复<a href="#bug-修复" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复无法从-10-版本进行滚动升级的问题">修复无法从 1.0 版本进行滚动升级的问题。<a href="#修复无法从-10-版本进行滚动升级的问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>这个问题是在 1.1.0 版本中出现的，当升级 BE 而不升级 FE 时，可能会导致 BE Core。</p><p>如果你遇到这个问题，你可以尝试用 <a href="https://github.com/apache/doris/pull/10833" target="_blank" rel="noopener noreferrer">#10833</a> 来修复它。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复某些查询不能回退到非向量化引擎的问题并导致-be-core">修复某些查询不能回退到非向量化引擎的问题，并导致 BE Core。<a href="#修复某些查询不能回退到非向量化引擎的问题并导致-be-core" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>目前，向量化执行引擎不能处理所有的 SQL 查询，一些查询（如 left outer join）将使用非向量化引擎来运行。但部分场景在 1.1.0 版本中未被覆盖到，这可能导致 BE 挂掉。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-compaction-不能正常工作导致的--235-错误">修复 Compaction 不能正常工作导致的 -235 错误。<a href="#修复-compaction-不能正常工作导致的--235-错误" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 Unique Key 模型中，当一个 Rowset 有多个 Segment 时，在做 Compaction 过程中由于没有正确的统计行数，会导致Compaction 失败并且产生 Tablet 版本过多而导致的 -235 错误。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复查询过程中出现的部分-segment-fault">修复查询过程中出现的部分 Segment fault。<a href="#修复查询过程中出现的部分-segment-fault" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><a href="https://github.com/apache/doris/pull/10961" target="_blank" rel="noopener noreferrer">#10961</a>
<a href="https://github.com/apache/doris/pull/10954" target="_blank" rel="noopener noreferrer">#10954</a>
<a href="https://github.com/apache/doris/pull/10962" target="_blank" rel="noopener noreferrer">#10962</a></p><h1>致谢</h1><p>感谢所有参与贡献 1.1.1 版本的开发者:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@jacktengg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@mrhhsg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xinyiZzz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yixiutt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@starocean999</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morrySnow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morningman</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@HappenLee</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/1.1 Release">Apache Doris 1.1 Release 版本正式发布</a></h2><div class="blog-info"><time datetime="2022-07-14T00:00:00.000Z" itemprop="datePublished">2022年7月14日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><p>亲爱的社区小伙伴们，我们很高兴地宣布，Apache Doris 在 2022 年 7 月 14 日迎来 1.1 Release 版本的正式发布！这是 Apache Doris 正式从 Apache 孵化器毕业后并成为 Apache 顶级项目后发布的第一个 Release 版本。在 1.1 版本中，有 90 位 Contributor 为 Apache Doris 提交了超过 450 项优化和修复，感谢每一个让 Apache Doris 变得更好的你！</p><p>在 1.1 版本中，<strong>我们实现了计算层和存储层的全面向量化、正式将向量化执行引擎作为稳定功能进行全面启用</strong>，所有查询默认通过向量化执行引擎来执行，<strong>性能较之前版本有 3-5 倍的巨大提升</strong>；增加了直接访问 Apache Iceberg 外部表的能力，支持对 Doris 和 Iceberg 中的数据进行联邦查询，<strong>扩展了 Apache Doris 在数据湖上的分析能力</strong>；在原有的 LZ4 基础上增加了 ZSTD 压缩算法，进一步提升了数据压缩率；<strong>修复了诸多之前版本存在的性能与稳定性问题</strong>，使系统稳定性得到大幅提升。欢迎大家下载使用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="升级说明">升级说明<a href="#升级说明" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="向量化执行引擎默认开启">向量化执行引擎默认开启<a href="#向量化执行引擎默认开启" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 Apache Doris 1.0 版本中，我们引入了向量化执行引擎作为实验性功能。用户需要在执行 SQL 查询手工开启，通过 <code>set batch_size = 4096</code> 和 <code>set enable_vectorized_engine = true </code>配置 session 变量来开启向量化执行引擎。</p><p>在 1.1 版本中，我们正式将向量化执行引擎作为稳定功能进行了全面启用，session 变量<code>enable_vectorized_engine</code> 默认设置为 true，无需用户手工开启，所有查询默认通过向量化执行引擎来执行。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="be-二进制文件更名">BE 二进制文件更名<a href="#be-二进制文件更名" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>BE 二进制文件从原有的 palo_be 更名为 doris_be ，如果您以前依赖进程名称进行集群管理和其他操作，请注意修改相关脚本。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="segment-存储格式升级">Segment 存储格式升级<a href="#segment-存储格式升级" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Apache Doris 早期版本的存储格式为 Segment V1，在 0.12 版本中我们实现了新的存储格式 Segment V2 ，引入了 Bitmap 索引、内存表、Page Cache、字典压缩以及延迟物化等诸多特性。从 0.13 版本开始，新建表的默认存储格式为 Segment V2，与此同时也保留了对 Segment V1 格式的兼容。</p><p>为了保证代码结构的可维护性、降低冗余历史代码带来的额外学习及开发成本，我们决定从下一个版本起不再支持 Segment v1 存储格式，预计在 Apache Doris 1.2 版本中将删除这部分代码，还请所有仍在使用 Segment V1 存储格式的用户务必在 1.1 版本中完成数据格式的转换，操作手册请参考以下链接：</p><p><a href="https://doris.apache.org/zh-CN/docs/1.0/administrator-guide/segment-v2-usage" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/1.0/administrator-guide/segment-v2-usage
</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="正常升级">正常升级<a href="#正常升级" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>正常升级操作请按照官网上的集群升级文档进行滚动升级即可。</p><p><a href="https://doris.apache.org/zh-CN/docs/admin-manual/cluster-management/upgrade" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/admin-manual/cluster-management/upgrade</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重要功能">重要功能<a href="#重要功能" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持数据随机分布-实验性功能httpsgithubcomapachedorispull8259-8041">支持数据随机分布 <!-- -->[实验性功能][#8259]<!-- -->(<a href="https://github.com/apache/doris/pull/8259" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/pull/8259</a>) <a href="https://github.com/apache/doris/pull/8041" target="_blank" rel="noopener noreferrer">#8041</a><a href="#支持数据随机分布-实验性功能httpsgithubcomapachedorispull8259-8041" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在某些场景中（例如日志分析类场景），用户可能无法找到一个合适的分桶键来避免数据倾斜，因此需要由系统提供额外的分布方式来解决数据倾斜的问题。</p><p>因此通过在建表时可以不指定具体分桶键，选择使用随机分布对数据进行分桶<code>DISTRIBUTED BY random BUCKET number</code>，数据导入时将会随机写入单个 Tablet ，以减少加载过程中的数据扇出，并减少资源开销、提升系统稳定性。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持创建-iceberg-外部表-实验性功能httpsgithubcomapachedorispull7391-7981-8179">支持创建 Iceberg 外部表 <!-- -->[实验性功能][#7391]<!-- -->(<a href="https://github.com/apache/doris/pull/7391" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/pull/7391</a>) <a href="https://github.com/apache/doris/pull/7981" target="_blank" rel="noopener noreferrer">#7981</a> <a href="https://github.com/apache/doris/pull/8179" target="_blank" rel="noopener noreferrer">#8179</a><a href="#支持创建-iceberg-外部表-实验性功能httpsgithubcomapachedorispull7391-7981-8179" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Iceberg 外部表为 Apache Doris 提供了直接访问存储在 Iceberg 数据的能力。通过 Iceberg 外部表可以实现对本地存储和 Iceberg 存储的数据进行联邦查询，省去繁琐的数据加载工作、简化数据分析的系统架构，并进行更复杂的分析操作。</p><p>在 1.1 版本中，Apache Doris 支持了创建 Iceberg 外部表并查询数据，并支持通过 REFRESH 命令实现 Iceberg 数据库中所有表 Schema 的自动同步。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="增加-zstd-压缩算法-8923-9747">增加 ZSTD 压缩算法 <a href="https://github.com/apache/doris/pull/8923" target="_blank" rel="noopener noreferrer">#8923</a> <a href="https://github.com/apache/doris/pull/9747" target="_blank" rel="noopener noreferrer">#9747</a><a href="#增加-zstd-压缩算法-8923-9747" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>目前 Apache Doris 中数据压缩方法是系统统一指定的，默认为 LZ4。针对部分对数据存储成本敏感的场景，例如日志类场景，原有的数据压缩率需求无法得到满足。</p><p>在 1.1 版本中，用户建表时可以在表属性中设置<code>&quot;compression&quot;=&quot;zstd&quot;</code> 将压缩方法指定为 ZSTD。在 25GB 1.1 亿行的文本日志测试数据中，<strong>最高获得了近 10 倍的压缩率、较原有压缩率提升了 53%，从磁盘读取数据并进行解压缩的速度提升了 30%</strong> 。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能优化">功能优化<a href="#功能优化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更全面的向量化支持"><strong>更全面的向量化支持</strong><a href="#更全面的向量化支持" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 1.1 版本中，我们实现了计算层和存储层的全面向量化，包括：</p><ul><li><p>实现了所有内置函数的向量化</p></li><li><p>存储层实现向量化，并支持了低基数字符串列的字典优化</p></li><li><p>优化并解决了向量化引擎的大量性能和稳定性问题。</p></li></ul><p>我们对 Apache Doris 1.1 版本与 0.15 版本分别在 SSB 和 TPC-H 标准测试数据集上进行了性能测试：</p><ul><li><p>在 SSB 测试数据集的全部 13 个 SQL 上，1.1 版本均优于 0.15 版本，整体性能约提升了 3 倍，解决了 1.0 版本中存在的部分场景性能劣化问题；</p></li><li><p>在 TPC-H 测试数据集的全部 22 个 SQL 上，1.1 版本均优于 0.15 版本，整体性能约提升了 4.5 倍，部分场景性能达到了十余倍的提升；</p></li></ul><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/edb59781b0f74ff08821467f23a63bad~tplv-k3u1fbpfcp-zoom-1.image" class="img_ev3q"></p><p align="center">SSB 测试数据集</p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e34377054f4448b3b367789a391f2122~tplv-k3u1fbpfcp-zoom-1.image" class="img_ev3q"></p><p align="center">TPC-H 测试数据集</p><p><strong>性能测试报告：</strong></p><p><a href="https://doris.apache.org/zh-CN/docs/benchmark/ssb" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/benchmark/ssb</a></p><p><a href="https://doris.apache.org/zh-CN/docs/benchmark/tpch" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/benchmark/tpch</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compaction-逻辑优化与实时性保证-10153">Compaction 逻辑优化与实时性保证 <a href="https://github.com/apache/doris/pull/10153" target="_blank" rel="noopener noreferrer">#10153</a><a href="#compaction-逻辑优化与实时性保证-10153" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 Apache Doris 中每次 Commit 都会产生一个数据版本，在高并发写入场景下，容易出现因数据版本过多且 Compaction 不及时而导致的 -235 错误，同时查询性能也会随之下降。</p><p>在 1.1 版本中我们引入了 QuickCompaction，增加了主动触发式的 Compaction 检查，在数据版本增加的时候主动触发 Compaction，同时通过提升分片元信息扫描的能力，快速发现数据版本过多的分片并触发 Compaction。通过主动式触发加被动式扫描的方式，彻底解决数据合并的实时性问题。</p><p>同时，针对高频的小文件 Cumulative Compaction，实现了 Compaction 任务的调度隔离，防止重量级的 Base Compaction 对新增数据的合并造成影响。</p><p>最后，针对小文件合并，优化了小文件合并的策略，采用梯度合并的方式，每次参与合并的文件都属于同一个数据量级，防止大小差别很大的版本进行合并，逐渐有层次的合并，减少单个文件参与合并的次数，能够大幅地节省系统的 CPU 消耗。</p><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6d5c50f16a048f3ab27357bc97b7461~tplv-k3u1fbpfcp-zoom-1.image" class="img_ev3q"></p><p>在数据上游维持每秒 10w 的写入频率时（20 个并发写入任务、每个作业 5000 行、 Checkpoint 间隔 1s），1.1 版本表现如下：</p><ul><li>数据快速合并：Tablet 数据版本维持在 50 以下，Compaction Score 稳定。相较于之前版本高并发写入时频繁出现的 -235 问题，<strong>Compaction 合并效率有 10 倍以上的提升</strong>。</li></ul><ul><li>CPU 资源消耗显著降低：针对小文件 Compaction 进行了策略优化，在上述高并发写入场景下，<strong>CPU 资源消耗降低 25%</strong> ；</li></ul><ul><li>查询耗时稳定：提升了数据整体有序性，大幅降低查询耗时的波动性，<strong>高并发写入时的查询耗时与仅查询时持平</strong>，查询性能较之前版本<strong>有 3-4 倍提升</strong>。</li></ul><p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c79ee9efba0416d81cc7bed1a349fdf~tplv-k3u1fbpfcp-zoom-1.image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="parquet-和-orc-文件的读取效率优化-9472">Parquet 和 ORC 文件的读取效率优化 <a href="https://github.com/apache/doris/pull/9472" target="_blank" rel="noopener noreferrer">#9472</a><a href="#parquet-和-orc-文件的读取效率优化-9472" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通过调整 Arrow 参数，利用 Arrow 的多线程读取能力来加速 Arrow 对每个 row_group 的读取，并修改成 SPSC 模型，通过预取来降低等待网络的代价。优化前后对 Parquet 文件导入的性能有 4 ～ 5 倍的提升。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更安全的元数据-checkpoint-9180-9192">更安全的元数据 Checkpoint <a href="https://github.com/apache/doris/pull/9180" target="_blank" rel="noopener noreferrer">#9180</a> <a href="https://github.com/apache/doris/pull/9192" target="_blank" rel="noopener noreferrer">#9192</a><a href="#更安全的元数据-checkpoint-9180-9192" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通过对元数据检查点后生成的 image 文件进行双重检查和保留历史 image 文件的功能，解决了 image 文件错误导致的元数据损坏问题。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-修复">Bug 修复<a href="#bug-修复" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复由于缺少数据版本而无法查询数据的问题严重9267-9266">修复由于缺少数据版本而无法查询数据的问题。（严重）<a href="https://github.com/apache/doris/pull/9267" target="_blank" rel="noopener noreferrer">#9267</a> <a href="https://github.com/apache/doris/pull/9266" target="_blank" rel="noopener noreferrer">#9266</a><a href="#修复由于缺少数据版本而无法查询数据的问题严重9267-9266" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>问题描述：<code>failed to initialize storage reader. tablet=924991.xxxx, res=-214, backend=xxxx</code></p><p>该问题是在版本 1.0 中引入的，可能会导致多个副本的数据版本丢失。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="解决了资源隔离对加载任务的资源使用限制无效的问题中等9492">解决了资源隔离对加载任务的资源使用限制无效的问题（中等）<a href="https://github.com/apache/doris/pull/9492" target="_blank" rel="noopener noreferrer">#9492</a><a href="#解决了资源隔离对加载任务的资源使用限制无效的问题中等9492" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 1.1 版本中， Broker Load 和 Routine Load 将使用具有指定资源标记的 BE 节点进行加载。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复使用-http-brpc-超过-2gb-传输网络数据包导致数据传输错误的问题中等9770">修复使用 HTTP BRPC 超过 2GB 传输网络数据包导致数据传输错误的问题（中等）<a href="https://github.com/apache/doris/pull/9770" target="_blank" rel="noopener noreferrer">#9770</a><a href="#修复使用-http-brpc-超过-2gb-传输网络数据包导致数据传输错误的问题中等9770" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在以前的版本中，当通过 BRPC 在后端之间传输的数据超过 2GB 时，可能会导致数据传输错误。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="其他">其他<a href="#其他" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="禁用-mini-load">禁用 Mini Load<a href="#禁用-mini-load" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Mini Load 与 Stream Load 的导入实现方式完全一致，都是通过 HTTP 协议提交和传输数据，在导入功能支持上 Stream Load 更加完备。</p><p>在 1.1 版本中，默认情况下 Mini Load 接口 <code>/_load</code> 将处于禁用状态，请统一使用 Stream Load 来替换 Mini Load。您也可以通过关闭 FE 配置项 <code>disable_mini_load</code> 来重新启用 Mini Load 接口。在版本 1.2 中，将彻底删除 Mini Load 。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="完全禁用-segmentv1-存储格式">完全禁用 SegmentV1 存储格式<a href="#完全禁用-segmentv1-存储格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 1.1 版本中将不再允许新创建 SegmentV1 存储格式的数据，现有数据仍可以继续正常访问。</p><p>您可以使用 ADMIN SHOW TABLET STORAGE FORMAT 语句检查集群中是否仍然存在 SegmentV1 格式的数据，如果存在请务必通过数据转换命令转换为 SegmentV2。</p><p>在 Apache Doris 1.2 版本中不再支持对 Segment V1 数据的访问，同时 Segment V1 代码将被彻底删除。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="限制-string-类型的最大长度-8567">限制 String 类型的最大长度 <a href="https://github.com/apache/doris/pull/8567" target="_blank" rel="noopener noreferrer">#8567</a><a href="#限制-string-类型的最大长度-8567" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>String 类型是 Apache Doris 在 0.15 版本中引入的新数据类型，在过去 String 类型的最大长度允许为 2GB。</p><p>在 1.1 版本中，我们将 String 类型的最大长度限制为 1 MB，超过此长度的字符串无法再写入，同时不再支持将 String 类型用作表的 Key 列、分区列以及分桶列。</p><p>已写入的字符串类型可以正常访问。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复-fastjson-相关漏洞-9763">修复 fastjson 相关漏洞 <a href="https://github.com/apache/doris/pull/9763" target="_blank" rel="noopener noreferrer">#9763</a><a href="#修复-fastjson-相关漏洞-9763" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>对 Canal 版本进行更新以修复 fastjson 安全漏洞</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加了-admin-diagnose-tablet-命令-8839">添加了 ADMIN DIAGNOSE TABLET 命令 <a href="https://github.com/apache/doris/pull/8839" target="_blank" rel="noopener noreferrer">#8839</a><a href="#添加了-admin-diagnose-tablet-命令-8839" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通过 ADMIN DIAGNOSE TABLET tablet_id 命令可以快速诊断指定 Tablet 的问题。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="下载使用">下载使用<a href="#下载使用" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="下载链接">下载链接<a href="#下载链接" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><a href="https://doris.apache.org/zh-CN/download" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/download</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="升级说明-1">升级说明<a href="#升级说明-1" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>您可以从 Apache Doris 1.0 Release 版本和 1.0.x 发行版本升级到 1.1 Release 版本，升级过程请官网参考文档。如果您当前是 0.15 Release 版本或 0.15.x 发行版本，可跳过 1.0 版本直接升级至 1.1。</p><p>[https://doris.apache.org/zh-CN/docs/admin-manual/cluster-management/upgrade]<!-- -->(<a href="https://doris.apache.org/zh-CN/docs/admin-manual/cluster-management/upgrade" target="_blank" rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/admin-manual/cluster-management/upgrade</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="意见反馈">意见反馈<a href="#意见反馈" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>如果您遇到任何使用上的问题，欢迎随时通过 GitHub Discussion 论坛或者 Dev 邮件组与我们取得联系。</p><p>GitHub 论坛：<a href="https://github.com/apache/incubator-doris/discussions" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-doris/discussions</a></p><p>Dev 邮件组：<a href="/zh-CN/blog/tags/dev@doris.apache.org">dev@doris.apache.org</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="致谢">致谢<a href="#致谢" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Apache Doris 1.1 Release 版本的发布离不开所有社区用户的支持，在此向所有参与版本设计、开发、测试、讨论的社区贡献者们表示感谢，他们分别是：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@adonis0147</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@airborne12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@amosbird</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@aopangzi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@arthuryangcs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@awakeljw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@BePPPower</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@BiteTheDDDDt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@bridgeDream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@caiconghui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@cambyzju</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ccoffline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@chenlinzhong</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@daikon12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DarvenDuan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dataalive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dataroaring</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@deardeng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Doris-Extras</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@emerkfu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EmmyMiao87</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@englefly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Gabriel39</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@GoGoWen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@gtchaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@HappenLee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@hello-stephen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Henry2SS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@hewei-nju</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@hf200012</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@jacktengg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@jackwener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Jibing-Li</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JNSimba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@kangshisen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Kikyou1997</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@kylinmac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Lchangliang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@leo65535</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@liaoxin01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@liutang123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@lovingfeel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@luozenglin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@luwei16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@luzhijing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@mklzl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morningman</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morrySnow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@nextdreamblue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Nivane</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@pengxiangyu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@qidaye</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@qzsee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SaintBacchus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SleepyBear96</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@smallhibiscus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@spaces-X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@stalary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@starocean999</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@steadyBoy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SWJTU-ZhangLei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Tanya-W</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tarepanda1024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tianhui5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Userwhite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangyf0555</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@weizuo93</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@whutpencil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wsjz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wunan1210</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xiaokang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xinyiZzz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xlwh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xy720</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yangzhg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Yankee24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yiguolei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yinzhijian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yixiutt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zbtzbtzbt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zenoyang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhangstar333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhangyifan27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhannngchen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhengshengjun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhengshiJ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zingdle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zuochunwei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zy-kkk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-note-1.0.0">[Doris 发版通告] Apache Doris(Incubating) 1.0.0 Release</a></h2><div class="blog-info"><time datetime="2022-04-18T00:00:00.000Z" itemprop="datePublished">2022年4月18日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><h1>Apache Doris(Incubating) 1.0.0 Release</h1><p>亲爱的社区小伙伴们，历时数月，我们很高兴地宣布，Apache Doris (incubating) 于 2022 年 4 月 18 日迎来了 1.0 Release 版本的正式发布！<strong>这是 Apache Doris 在进入 Apache 基金会孵化以来的第一个 1 位版本，也是迄今为止对 Apache Doris 核心代码重构幅度最大的一个版本<!-- -->*<!-- -->*</strong>！<strong>有 </strong>114 位 Contributor<strong> 为 Apache Doris 提交了</strong>超过 660 项优化和修复<!-- -->*<!-- -->*<!-- -->，感谢每一个让 Apache Doris 变得更好的你！</p><p>在 1.0 版本中，我们引入了向量化执行引擎、Hive 外部表、Lateral View 语法及 Table Function 表函数、Z-Order 数据索引、Apache SeaTunnel 插件等重要功能，增加了对 Flink CDC 同步更新和删除数据的支持，优化了诸多数据导入和查询过程中的问题，对 Apache Doris 的查询性能、易用性、稳定性等多方特效进行了全面加强，欢迎大家下载使用！点击文末“<strong>阅读原文</strong>”即可直接前往下载地址。</p><p>每一个不曾发版的日子，背后都有无数贡献者枕戈待旦，不敢停歇半分。在此我们尤其要感谢来自<strong>向量化执行引擎、查询优化器、可视化运维平台 等 SIG （专项兴趣小组）的小伙伴</strong>。自 2021 年 8 月 Apache Doris 社区 SIG 小组成立以来，<strong>来自百度、美团、小米、京东、蜀海、字节跳动、腾讯、网易、阿里巴巴、PingCAP、Nebula Graph 等十余家公司的数十名贡献者</strong>作为首批成员加入到 SIG 中，第一次以专项小组的开源协作形式完成了向量化执行引擎、查询优化器、 Doris Manager 可视化监控运维平台等如此重大功能的开发，<strong>历时半年以上、开展技术调研和分享数十次、召开远程会议近百次、累计提交 Commits 多达数百个、涉及代码行数高达十余万行</strong>，正是因为有他们的贡献，才有 1.0 版本的问世，让我们再次对他们的辛勤付出表示最真诚的感谢！</p><p>与此同时，Apache Doris 的贡献者数量已超过 300 人，每月活跃的贡献者数量超过了 60 人，近几周平均每周提交的 Commits 数量也超过 80，社区聚集的开发者规模及活跃度已经有了极大的提升。我们十分期待有更多的小伙伴参与社区贡献中来，与我们一道把 Apache Doris 打造成全球顶级的分析型数据库，也期待所有小伙伴可以与我们一起收获宝贵的成长。如果你想参与社区，欢迎通过开发者邮箱 <a href="mailto:dev@doris.apache.org" target="_blank" rel="noopener noreferrer">dev@doris.apache.org</a> 与我们取得联系。</p><p>我们欢迎大家在使用过程中，有任何问题通过 GitHub Discussion 或者 Dev 邮件组与我们取得联系，也期待大家参与社区讨论和建设中 。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重要更新">重要更新<a href="#重要更新" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="向量化执行引擎-experimental">向量化执行引擎 <!-- -->[Experimental]<a href="#向量化执行引擎-experimental" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>过去 Apache Doris 的 SQL 执行引擎是基于行式内存格式以及基于传统的火山模型进行设计的，在进行 SQL 算子与函数运算时存在非必要的开销，导致 Apache Doris 执行引擎的效率受限，并不适应现代 CPU 的体系结构。向量化执行引擎的目标是替换 Apache Doris 当前的行式 SQL 执行引擎，充分释放现代 CPU 的计算能力，突破在 SQL 执行引擎上的性能限制，发挥出极致的性能表现。</p><p>基于现代 CPU 的特点与火山模型的执行特点，向量化执行引擎重新设计了在列式存储系统的 SQL 执行引擎：</p><ul><li>重新组织内存的数据结构，用 Column 替换 Tuple，提高了计算时 Cache 亲和度，分支预测与预取内存的友好度</li><li>分批进行类型判断，在本次批次中都使用类型判断时确定的类型，将每一行类型判断的虚函数开销分摊到批量级别。</li><li>通过批级别的类型判断，消除了虚函数的调用，让编译器有函数内联以及 SIMD 优化的机会</li></ul><p>从而大大提高了 CPU 在 SQL 执行时的效率，提升了 SQL 查询的性能。</p><p>在 Apache Doris 1.0 版本中，通过 set batch_size = 4096 和 set enable_vectorized_engine = true 开启向量化执行引擎，多数情况下可显著提升查询性能。在 SSB 和 OnTime 标准测试数据集下，多表关联和宽列查询两大场景的整体性能分别有 3 倍和 2.6 倍的提升。</p><p><img loading="lazy" src="https://cdnd.selectdb.com/zh-CN/assets/images/1.0.0-1-e7888e124fefa8bd38215dd9d4be4794.png" width="1080" height="697" class="img_ev3q"></p><p><img loading="lazy" src="https://cdnd.selectdb.com/zh-CN/assets/images/1.0.0-2-d9e8be01f5ff99dd6e15fc33af4518fc.png" width="1080" height="819" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lateral-view-语法-experimental">Lateral View 语法 <!-- -->[Experimental]<a href="#lateral-view-语法-experimental" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通过 Lateral View 语法，我们可以使用 explod_bitmap 、explode_split、explode_jaon_array 等 Table Function 表函数，将 bitmap、String 或 Json Array 由一列展开成多行，以便后续可以对展开的数据进行进一步处理（如 Filter、Join 等）。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hive-外表-experimental">Hive 外表 <!-- -->[Experimental]<a href="#hive-外表-experimental" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Hive External Table 为用户提供了通过 Doris 直接访问 Hive 表的能力，外部表省去了 繁琐的数据导入工作，可以借助 Doris 本身 OLAP 的能力来解决 Hive 表的数据分析问题。当前版本支持将 Hive 数据源接入 Doris，并支持通过 Doris 与 Hive 数据源中的数据进行联邦查询，进行更加复杂的分析操作。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持-z-order-数据排序格式">支持 Z-Order 数据排序格式<a href="#支持-z-order-数据排序格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Apache Doris 数据是按照前缀列排序存储的，因此在包含前缀查询条件时，可以在排序数据上进行快速的数据查找，但如果查询条件不是前缀列，则无法利用数据排序的特征进行快速数据查找。通过 Z-Order Indexing 可以解决上述问题，在 1.0 版本中我们增加了 Z-Order 数据排序格式，在看板类多列查询的场景中可以起到很好过滤效果，加速对非前缀列条件的过滤性能。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持-apache-seatunnelincubating插件">支持 Apache SeaTunnel（Incubating）插件<a href="#支持-apache-seatunnelincubating插件" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Apache SeaTunnel 是一个高性能的分布式数据集成框架，架构于 Apache Spark 和 Apache Flink 之上。在 Apache Doris 1.0 版本中，我们增加了 SaeTunnel 插件，用户可以借助 Apache SeaTunnel 进行多数据源之间的同步和 ETL。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增函数">新增函数<a href="#新增函数" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>支持更多 bitmap 函数，具体可查看函数手册：</p><ul><li>bitmap_max</li><li>bitmap_and_not</li><li>bitmap_and_not_count</li><li>bitmap_has_all</li><li>bitmap_and_count</li><li>bitmap_or_count</li><li>bitmap_xor_count</li><li>bitmap_subset_limit</li><li>sub_bitmap</li></ul><p>支持国密算法 SM3/SM4；</p><blockquote><p><strong>注意</strong>：以上标记 <!-- -->[Experimental]<!-- --> 的功能为实验性功能，我们将会在后续版本中对以上功能进行持续优化和迭代，并后续版本中进一步完善。在使用过程中有任何问题或意见，欢迎随时与我们联系</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="重要优化">重要优化<a href="#重要优化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能优化">功能优化<a href="#功能优化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>降低大批量导入时，生成的 Segment 文件数量，以降低 Compaction 压力。</li><li>通过 BRPC 的 attachment 功能传输数据，以查询过程中的降低序列化和反序列化开销。</li><li>支持直接返回 HLL/BITMAP 类型的二进制数据，用于业务在外侧解析。</li><li>优化并降低 BRPC 出现 OVERCROWDED 和 NOT_CONNECTED 错误的概率，增强系统稳定性。</li><li>增强导入的容错性。</li><li>支持通过 Flink CDC 同步更新和删除数据。</li><li>支持自适应的 Runtime Filter。</li><li>显著降低 insert into 操作的内存占用</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="易用性改进">易用性改进<a href="#易用性改进" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>Routine Load 支持显示当前 offset 延迟数量等状态。</li><li>FE audit log 中增加查询峰值内存使用量的统计。</li><li>Compaction URL 结果中增加缺失版本的信息，方便排查问题。</li><li>支持将 BE 标记为不可查询或不可导入，以快速屏蔽问题节点。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="重要-bug-修复">重要 Bug 修复<a href="#重要-bug-修复" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>修复若干查询错误问题。</li><li>修复 Broker Load 若干调度逻辑问题。</li><li>修复 STREAM 关键词导致元数据无法加载的问题。</li><li>修复 Decommission 无法正确执行的问题。</li><li>修复部分情况下操作 Schema Change 操作可能出现 -102 错误的问题。</li><li>修复部分情况下使用 String 类型可能导致 BE 宕机的问题。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="其他">其他<a href="#其他" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>增加 Minidump 功能；</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="更新日志">更新日志<a href="#更新日志" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>详细 Release Note 请查看链接：</p><p><a href="https://github.com/apache/incubator-doris/issues/8549" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-doris/issues/8549</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="致谢">致谢<a href="#致谢" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Apache Doris(incubating) 1.0 Release 版本的发布离不开所有社区用户的支持，在此向所有参与版本设计、开发、测试、讨论的社区贡献者们表示感谢，他们分别是：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@924060929</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@adonis0147</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Aiden-Dong</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@aihai</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@airborne12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Alibaba-HZY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@amosbird</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@arthuryangcs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@awakeljw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@bingzxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@BiteTheDDDDt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@blackstar-baba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@caiconghui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@CalvinKirs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@cambyzju</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@caoliang-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ccoffline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@chaplinthink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@chovy-3012</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ChPi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DarvenDuan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dataalive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dataroaring</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dh-cloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dohongdayi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@dongweizhao</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@drgnchan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@e0c9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EmmyMiao87</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@englefly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@eyesmoons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@freemandealer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Gabriel39</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@gaodayue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@GoGoWen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Gongruixiao</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@gwdgithubnom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@HappenLee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Henry2SS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@hf200012</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@htyoung</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@jacktengg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@jackwener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JNSimba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Keysluomo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@kezhenxu94</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@killxdcj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@lihuigang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@littleeleventhwolf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@liutang123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@liuzhuang2017</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@lonre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@lovingfeel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@luozenglin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@luzhijing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@MeiontheTop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@mh-boy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@morningman</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@mrhhsg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Myasuka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@nimuyuhan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@obobj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@pengxiangyu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@qidaye</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@qzsee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@renzhimin7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Royce33</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SleepyBear96</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@smallhibiscus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sodamnsure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@spaces-X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sparklezzz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@stalary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@steadyBoy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tarepanda1024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@THUMarkLau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tianhui5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tinkerrrr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ucasfl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Userwhite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@vinson0526</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangshuo128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wangyf0555</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@weajun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@weizuo93</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@whutpencil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@WindyGao</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@wunan1210</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xiaokang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xiaokangguo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xiedeyantu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xinghuayu007</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xingtanzjr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xinyiZzz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xtr1993</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xu20160924</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xuliuzhe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xuzifu666</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@xy720</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yangzhg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yiguolei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yinzhijian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@yjant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zbtzbtzbt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zenoyang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zh0122</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhangstar333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhannngchen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhengshengjun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zhengshiJ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ZhikaiZuo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ztgoto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@zuochunwei</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blog-post-title" itemprop="headline"><a itemprop="url" href="/zh-CN/blog/release-note-0.15.0">[Doris 发版通告] Apache Doris(Incubating) 0.15.0 Release</a></h2><div class="blog-info"><time datetime="2021-11-29T00:00:00.000Z" itemprop="datePublished">2021年11月29日</time><span class="split-line"></span><span class="authors"><span class="s-author">Apache Doris</span></span><span class="split-line"></span><span class="s-tags"><span class="s-tag">版本发布</span></span></div></header><div class="markdown" itemprop="articleBody"><h1>Apache Doris(Incubating) 0.15.0 Release</h1><p>亲爱的社区小伙伴们，历时数个月精心打磨，我们很高兴地宣布， Apache Doris(incubating) 于 2021 年 11 月 29 日迎来了 0.15.0 Release 版本的正式发布！有 99 位 Contributor 为 Apache Doris 提交了近 700 项优化和修复，在此我们也对所有贡献者表示最真诚的感激！</p><p>在 0.15.0 Release 版本中，我们增加了诸多新功能，对 Apache Doris 的查询性能、易用性、稳定性方面等进行了全面优化：新增资源划分和隔离功能，用户可以通过资源标签的方式将集群中的 BE 节点划分为资源组，实现对在线、离线业务的统一管理和资源隔离；增加了 Runtime Filter 及 Join Reorder 功能，对多表 Join 场景的查询效率进行了大幅提升，在 Star Schema Benchmark 测试数据集下有 2-10 倍的性能提升；新增导入方式 Binlog Load ，使 Doris 可以增量同步 MySQL 中对数据更新操作的 CDC ；支持 String 列类型，长度最大支持 2GB ；支持 List 分区功能，可以通过枚举值创建分区；支持 Unique Key 模型上的 Update 语句；Spark-Doris-Connector 支持数据写入 Doris ……还有更多重要特性，欢迎大家下载使用。</p><p>我们欢迎大家在使用过程中，有任何问题通过 GitHub Discussion 或者 Dev 邮件组与我们取得联系，也期待大家参与社区讨论和建设中 。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重要更新">重要更新<a href="#重要更新" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="资源划分与隔离">资源划分与隔离<a href="#资源划分与隔离" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>用户可以通过资源标签的方式将一个 Doris 集群中的 BE 节点划分成多个资源组，从而可以进行在线、离线业务的统一管理和节点级别的资源隔离。
同时，还可以通过限制单个查询任务的 CPU、内存开销以及复杂度，来控制单个查询的资源开销，从而降低不同查询之间的资源抢占问题。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="性能优化">性能优化<a href="#性能优化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><p>Runtime Filter 功能通过使用 Join 算子中右表的 Join Key 列条件来过滤左表的数据，在大部分 Join 场景下可以显著提升查询效率。如在 Star Schema Benchmark ( TPCH 的精简测试集) 下可以获得 2-10 倍的性能提升。</p></li><li><p>Join Reorder 功能可以通过通过代价模型自动帮助调整 SQL 中 Join 的顺序，以帮助获得最优的 Join 效率。
可通过会话变量  <code>set enable_cost_based_join_reorder=true</code>  开启。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增功能">新增功能<a href="#新增功能" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持直接对接 Canal Server 同步 MySQL binlog 数据。</li><li>支持 String 列类型，最大支持 2GB 。</li><li>支持 List 分区功能，可以针对枚举值创建分区。</li><li>支持事务性 Insert 语句功能。可以通过 begin ; insert ; insert; ,... ; commit ; 的方式批量导入数据。</li><li>支持在 Unique Key 模型上的 Update 语句功能。可以在 Unique Key 模型表上执行 Update Set where 语句。</li><li>支持 SQL 阻塞名单功能。可以通过正则、Hash 值匹配等方式阻止部分 SQL 的执行。</li><li>支持 LDAP 登陆验证。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="拓展功能">拓展功能<a href="#拓展功能" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持 Flink-Doris-Connector 。</li><li>支持 DataX doriswriter 插件。</li><li>Spark-Doris-Connector 支持数据写入 Doris 。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能优化">功能优化<a href="#功能优化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="查询">查询<a href="#查询" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持在 SQL 查询规划阶段，利用 BE 的函数计算能力计算所有常量表达式。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="导入">导入<a href="#导入" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持导入文本格式文件时，指定多字节行列分隔符或不可见分隔符。</li><li>支持通过 Stream Load 导入压缩格式文件。</li><li>Stream Load支持导入多行格式的 Json 数据。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="导出">导出<a href="#导出" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持 Export 导出功能指定 where 过滤条件。支持导出文件使用多字节行列分隔符。支持导出到本地文件。</li><li>Export 导出功能支持仅导出指定的列。</li><li>支持通过 outfile 语句导出结果集到本地磁盘，并支持导出后写入导出成功的标记文件。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="易用性">易用性<a href="#易用性" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>动态分区功能支持创建、保留指定的历史分区、支持自动冷热数据迁移设置。</li><li>支持在命令行使用可视化的树形结构展示查询、导入的计划和 Profile。</li><li>支持记录并查看 Stream Load 操作日志。</li><li>通过 Routine Load 消费 Kafka 数据时，可以指定时间点进行消费。</li><li>支持通过 show create routine load 功能导出 Routine Load 的创建语句。</li><li>支持通过 pause/resume all routine load 命令一键启停所有 Routine Load Job。</li><li>支持通过 alter routine load 语句修改 Routine Load 的 Broker List 和 Topic。</li><li>支持 create table as select 功能。</li><li>支持通过 alter table 命令修改列注释和表注释。</li><li>show tablet status 增加表创建时间、数据更新时间。</li><li>支持通过 show data skew 命令查看表的数据量分布，以排查数据倾斜问题。</li><li>支持通过 show/clean trash 命令查看 BE 文件回收站的磁盘占用情况并主动清除。</li><li>支持通过 show view 语句展示一个表被哪些视图所引用。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增函数">新增函数<a href="#新增函数" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li><code>bitmap_min</code>, <code>bit_length</code></li><li><code>yearweek</code>, <code>week</code>, <code>makedate</code></li><li><code>percentile</code> 精确百分位函数</li><li><code>json_array</code>，<code>json_object</code>，<code>json_quote</code></li><li>支持为 <code>AES_ENCRYPT</code> 和 <code>AES_DECRYPT</code> 函数创建自定义公钥。</li><li>支持通过 <code>create alias function</code> 创建函数别名来组合多个函数。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="其他">其他<a href="#其他" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>支持访问 SSL 连接协议的ES外表。</li><li>支持在动态分区属性中指定热点分区的数量，热点分区将存储在 SSD 磁盘中。</li><li>支持通过 Broker Load 导入 Json 格式数据。</li><li>支持直接通过 libhdfs3 库访问 HDFS 进行数据的导入导出，而不需要 Broker 进程。</li><li>select into outfile 功能支持导出 Parquet 文件格式，并支持并行导出。</li><li>ODBC 外表支持 SQLServer。 </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="致谢">致谢<a href="#致谢" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Apache Doris(incubating) 0.15.0 Release 版本的发布离不开所有社区用户的支持，在此向所有参与版本设计、开发、测试、讨论的社区贡献者们表示感谢，他们分别是：</p><ul><li><a href="https://github.com/924060929" target="_blank" rel="noopener noreferrer">@924060929</a></li><li><a href="https://github.com/acelyc111" target="_blank" rel="noopener noreferrer">@acelyc111</a></li><li><a href="https://github.com/Aimiyoo" target="_blank" rel="noopener noreferrer">@Aimiyoo</a></li><li><a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">@amosbird</a></li><li><a href="https://github.com/arthur-zhang" target="_blank" rel="noopener noreferrer">@arthur-zhang</a></li><li><a href="https://github.com/azurenake" target="_blank" rel="noopener noreferrer">@azurenake</a></li><li><a href="https://github.com/BiteTheDDDDt" target="_blank" rel="noopener noreferrer">@BiteTheDDDDt</a></li><li><a href="https://github.com/caiconghui" target="_blank" rel="noopener noreferrer">@caiconghui</a></li><li><a href="https://github.com/caneGuy" target="_blank" rel="noopener noreferrer">@caneGuy</a></li><li><a href="https://github.com/caoliang-web" target="_blank" rel="noopener noreferrer">@caoliang-web</a></li><li><a href="https://github.com/ccoffline" target="_blank" rel="noopener noreferrer">@ccoffline</a></li><li><a href="https://github.com/chaplinthink" target="_blank" rel="noopener noreferrer">@chaplinthink</a></li><li><a href="https://github.com/chovy-3012" target="_blank" rel="noopener noreferrer">@chovy-3012</a></li><li><a href="https://github.com/ChPi" target="_blank" rel="noopener noreferrer">@ChPi</a></li><li><a href="https://github.com/copperybean" target="_blank" rel="noopener noreferrer">@copperybean</a></li><li><a href="https://github.com/crazyleeyang" target="_blank" rel="noopener noreferrer">@crazyleeyang</a></li><li><a href="https://github.com/dh-cloud" target="_blank" rel="noopener noreferrer">@dh-cloud</a></li><li><a href="https://github.com/DinoZhang" target="_blank" rel="noopener noreferrer">@DinoZhang</a></li><li><a href="https://github.com/dixingxing0" target="_blank" rel="noopener noreferrer">@dixingxing0</a></li><li><a href="https://github.com/dohongdayi" target="_blank" rel="noopener noreferrer">@dohongdayi</a></li><li><a href="https://github.com/e0c9" target="_blank" rel="noopener noreferrer">@e0c9</a></li><li><a href="https://github.com/EmmyMiao87" target="_blank" rel="noopener noreferrer">@EmmyMiao87</a></li><li><a href="https://github.com/eyesmoons" target="_blank" rel="noopener noreferrer">@eyesmoons</a></li><li><a href="https://github.com/francisoliverlee" target="_blank" rel="noopener noreferrer">@francisoliverlee</a></li><li><a href="https://github.com/Gabriel39" target="_blank" rel="noopener noreferrer">@Gabriel39</a></li><li><a href="https://github.com/gaodayue" target="_blank" rel="noopener noreferrer">@gaodayue</a></li><li><a href="https://github.com/GoGoWen" target="_blank" rel="noopener noreferrer">@GoGoWen</a></li><li><a href="https://github.com/HappenLee" target="_blank" rel="noopener noreferrer">@HappenLee</a></li><li><a href="https://github.com/harveyyue" target="_blank" rel="noopener noreferrer">@harveyyue</a></li><li><a href="https://github.com/Henry2SS" target="_blank" rel="noopener noreferrer">@Henry2SS</a></li><li><a href="https://github.com/hf200012" target="_blank" rel="noopener noreferrer">@hf200012</a></li><li><a href="https://github.com/huangmengbin" target="_blank" rel="noopener noreferrer">@huangmengbin</a></li><li><a href="https://github.com/huozhanfeng" target="_blank" rel="noopener noreferrer">@huozhanfeng</a></li><li><a href="https://github.com/huzk8" target="_blank" rel="noopener noreferrer">@huzk8</a></li><li><a href="https://github.com/hxianshun" target="_blank" rel="noopener noreferrer">@hxianshun</a></li><li><a href="https://github.com/ikaruga4600" target="_blank" rel="noopener noreferrer">@ikaruga4600</a></li><li><a href="https://github.com/JameyWoo" target="_blank" rel="noopener noreferrer">@JameyWoo</a></li><li><a href="https://github.com/Jennifer88huang" target="_blank" rel="noopener noreferrer">@Jennifer88huang</a></li><li><a href="https://github.com/JinLiOnline" target="_blank" rel="noopener noreferrer">@JinLiOnline</a></li><li><a href="https://github.com/jinyuanlu" target="_blank" rel="noopener noreferrer">@jinyuanlu</a></li><li><a href="https://github.com/JNSimba" target="_blank" rel="noopener noreferrer">@JNSimba</a></li><li><a href="https://github.com/killxdcj" target="_blank" rel="noopener noreferrer">@killxdcj</a></li><li><a href="https://github.com/kuncle" target="_blank" rel="noopener noreferrer">@kuncle</a></li><li><a href="https://github.com/liutang123" target="_blank" rel="noopener noreferrer">@liutang123</a></li><li><a href="https://github.com/luozenglin" target="_blank" rel="noopener noreferrer">@luozenglin</a></li><li><a href="https://github.com/luzhijing" target="_blank" rel="noopener noreferrer">@luzhijing</a></li><li><a href="https://github.com/MarsXDM" target="_blank" rel="noopener noreferrer">@MarsXDM</a></li><li><a href="https://github.com/mh-boy" target="_blank" rel="noopener noreferrer">@mh-boy</a></li><li><a href="https://github.com/mk8310" target="_blank" rel="noopener noreferrer">@mk8310</a></li><li><a href="https://github.com/morningman" target="_blank" rel="noopener noreferrer">@morningman</a></li><li><a href="https://github.com/Myasuka" target="_blank" rel="noopener noreferrer">@Myasuka</a></li><li><a href="https://github.com/nimuyuhan" target="_blank" rel="noopener noreferrer">@nimuyuhan</a></li><li><a href="https://github.com/pan3793" target="_blank" rel="noopener noreferrer">@pan3793</a></li><li><a href="https://github.com/PatrickNicholas" target="_blank" rel="noopener noreferrer">@PatrickNicholas</a></li><li><a href="https://github.com/pengxiangyu" target="_blank" rel="noopener noreferrer">@pengxiangyu</a></li><li><a href="https://github.com/pierre94" target="_blank" rel="noopener noreferrer">@pierre94</a></li><li><a href="https://github.com/qidaye" target="_blank" rel="noopener noreferrer">@qidaye</a></li><li><a href="https://github.com/qzsee" target="_blank" rel="noopener noreferrer">@qzsee</a></li><li><a href="https://github.com/shiyi23" target="_blank" rel="noopener noreferrer">@shiyi23</a></li><li><a href="https://github.com/smallhibiscus" target="_blank" rel="noopener noreferrer">@smallhibiscus</a></li><li><a href="https://github.com/songenjie" target="_blank" rel="noopener noreferrer">@songenjie</a></li><li><a href="https://github.com/spaces-X" target="_blank" rel="noopener noreferrer">@spaces-X</a></li><li><a href="https://github.com/stalary" target="_blank" rel="noopener noreferrer">@stalary</a></li><li><a href="https://github.com/stdpain" target="_blank" rel="noopener noreferrer">@stdpain</a></li><li><a href="https://github.com/Stephen-Robin" target="_blank" rel="noopener noreferrer">@Stephen-Robin</a></li><li><a href="https://github.com/Sunt-ing" target="_blank" rel="noopener noreferrer">@Sunt-ing</a></li><li><a href="https://github.com/Taaang" target="_blank" rel="noopener noreferrer">@Taaang</a></li><li><a href="https://github.com/tarepanda1024" target="_blank" rel="noopener noreferrer">@tarepanda1024</a></li><li><a href="https://github.com/tianhui5" target="_blank" rel="noopener noreferrer">@tianhui5</a></li><li><a href="https://github.com/tinkerrrr" target="_blank" rel="noopener noreferrer">@tinkerrrr</a></li><li><a href="https://github.com/TobKed" target="_blank" rel="noopener noreferrer">@TobKed</a></li><li><a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">@ucasfl</a></li><li><a href="https://github.com/Userwhite" target="_blank" rel="noopener noreferrer">@Userwhite</a></li><li><a href="https://github.com/vinson0526" target="_blank" rel="noopener noreferrer">@vinson0526</a></li><li><a href="https://github.com/wangbo" target="_blank" rel="noopener noreferrer">@wangbo</a></li><li><a href="https://github.com/wangliansong" target="_blank" rel="noopener noreferrer">@wangliansong</a></li><li><a href="https://github.com/wangshuo128" target="_blank" rel="noopener noreferrer">@wangshuo128</a></li><li><a href="https://github.com/weajun" target="_blank" rel="noopener noreferrer">@weajun</a></li><li><a href="https://github.com/weihongkai2008" target="_blank" rel="noopener noreferrer">@weihongkai2008</a></li><li><a href="https://github.com/weizuo93" target="_blank" rel="noopener noreferrer">@weizuo93</a></li><li><a href="https://github.com/WindyGao" target="_blank" rel="noopener noreferrer">@WindyGao</a></li><li><a href="https://github.com/wunan1210" target="_blank" rel="noopener noreferrer">@wunan1210</a></li><li><a href="https://github.com/wuyunfeng" target="_blank" rel="noopener noreferrer">@wuyunfeng</a></li><li><a href="https://github.com/xhmz" target="_blank" rel="noopener noreferrer">@xhmz</a></li><li><a href="https://github.com/xiaokangguo" target="_blank" rel="noopener noreferrer">@xiaokangguo</a></li><li><a href="https://github.com/xiaoxiaopan118" target="_blank" rel="noopener noreferrer">@xiaoxiaopan118</a></li><li><a href="https://github.com/xinghuayu007" target="_blank" rel="noopener noreferrer">@xinghuayu007</a></li><li><a href="https://github.com/xinyiZzz" target="_blank" rel="noopener noreferrer">@xinyiZzz</a></li><li><a href="https://github.com/xuliuzhe" target="_blank" rel="noopener noreferrer">@xuliuzhe</a></li><li><a href="https://github.com/xxiao2018" target="_blank" rel="noopener noreferrer">@xxiao2018</a></li><li><a href="https://github.com/xy720" target="_blank" rel="noopener noreferrer">@xy720</a></li><li><a href="https://github.com/yangzhg" target="_blank" rel="noopener noreferrer">@yangzhg</a></li><li><a href="https://github.com/yx91490" target="_blank" rel="noopener noreferrer">@yx91490</a></li><li><a href="https://github.com/zbtzbtzbt" target="_blank" rel="noopener noreferrer">@zbtzbtzbt</a></li><li><a href="https://github.com/zenoyang" target="_blank" rel="noopener noreferrer">@zenoyang</a></li><li><a href="https://github.com/zh0122" target="_blank" rel="noopener noreferrer">@zh0122</a></li><li><a href="https://github.com/zhangboya1" target="_blank" rel="noopener noreferrer">@zhangboya1</a></li><li><a href="https://github.com/zhangstar333" target="_blank" rel="noopener noreferrer">@zhangstar333</a></li><li><a href="https://github.com/zuochunwei" target="_blank" rel="noopener noreferrer">@zuochunwei</a></li></ul></div></article><nav class="pagination-nav" aria-label="博文列表分页导航"></nav></main></div></div></div></div><div class="footer"><div class="container"><div class="footer-box"><div class="left"><img src="/zh-CN/images/asf_logo_apache.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/zh-CN/images/asf_logo_apache.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">资源</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/download">下载</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-CN/learning">文档</a></li></ul></div><div class="col footer__col"><div class="footer__title">ASF</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">基金会<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="footer__link-item">版权<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">活动<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">捐赠<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">隐私<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">鸣谢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">语言</div><ul class="footer__items clean-list"><li class="footer__item"><a href="/blog/tags/版本发布" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link footer__link-item">English</a></li><li class="footer__item"><a href="/zh-CN/blog/tags/版本发布" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link footer__link-item">简体中文</a></li></ul></div></div></div><div class="right"><div class="footer__title">分享</div><div class="social-list"><div class="social"><a href="mailto:dev@doris.apache.org" title="mail" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.6003 6H26.3997C27.8186 6 28.982 7.10964 29 8.46946L16.0045 15.454L3.01202 8.47829C3.02405 7.11258 4.1784 6 5.6003 6ZM3.01202 11.1508L3 23.5011C3 24.8756 4.16938 26 5.6003 26H26.3997C27.8306 26 29 24.8756 29 23.5011V11.145L16.3111 17.8028C16.1157 17.9058 15.8813 17.9058 15.6889 17.8028L3.01202 11.1508V11.1508Z" fill="currentColor"></path></svg></a><a href="https://github.com/apache/doris" title="github" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0001 2.66675C8.63342 2.66675 2.66675 8.63341 2.66675 16.0001C2.66524 18.7991 3.54517 21.5276 5.1817 23.7983C6.81824 26.0691 9.12828 27.7668 11.7841 28.6508C12.4508 28.7668 12.7001 28.3668 12.7001 28.0161C12.7001 27.7001 12.6828 26.6508 12.6828 25.5334C9.33342 26.1508 8.46675 24.7174 8.20008 23.9668C8.04942 23.5828 7.40008 22.4001 6.83342 22.0828C6.36675 21.8334 5.70008 21.2161 6.81608 21.2001C7.86675 21.1828 8.61608 22.1668 8.86675 22.5668C10.0668 24.5828 11.9841 24.0161 12.7494 23.6668C12.8668 22.8001 13.2161 22.2174 13.6001 21.8841C10.6334 21.5508 7.53342 20.4001 7.53342 15.3001C7.53342 13.8494 8.04942 12.6507 8.90008 11.7161C8.76675 11.3827 8.30008 10.0161 9.03342 8.18275C9.03342 8.18275 10.1494 7.83342 12.7001 9.55075C13.7855 9.2495 14.907 9.09787 16.0334 9.10008C17.1668 9.10008 18.3001 9.24942 19.3668 9.54942C21.9161 7.81608 23.0334 8.18408 23.0334 8.18408C23.7668 10.0174 23.3001 11.3841 23.1668 11.7174C24.0161 12.6507 24.5334 13.8334 24.5334 15.3001C24.5334 20.4174 21.4174 21.5508 18.4508 21.8841C18.9334 22.3001 19.3508 23.1001 19.3508 24.3508C19.3508 26.1334 19.3334 27.5668 19.3334 28.0174C19.3334 28.3668 19.5841 28.7828 20.2508 28.6494C22.8975 27.7558 25.1973 26.0547 26.8266 23.7856C28.4559 21.5165 29.3327 18.7936 29.3334 16.0001C29.3334 8.63341 23.3668 2.66675 16.0001 2.66675V2.66675Z" fill="currentColor"></path></svg></a><a href="https://twitter.com/doris_apache" title="twitter" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M27.1493 10.8313C27.1493 10.5687 27.1442 10.3091 27.1326 10.0512C28.2554 9.21471 29.2295 8.1676 30 6.96938C28.9537 7.44012 27.8403 7.74469 26.7 7.8721C27.8868 7.14188 28.7969 5.97403 29.227 4.57256C28.1158 5.24638 26.8867 5.72811 25.5798 5.97912C24.5326 4.78777 23.0383 4.02895 21.3864 4.00076C18.2137 3.94831 15.6418 6.62904 15.6418 9.98754C15.6418 10.4649 15.6918 10.9279 15.7909 11.3749C11.0133 11.0675 6.77972 8.58103 3.9478 4.8326C3.45367 5.73067 3.17017 6.78025 3.17017 7.90503C3.17017 10.0324 4.18438 11.9232 5.72536 13.039C4.78198 12.9963 3.89827 12.7106 3.12316 12.2422V12.3204C3.12316 15.2937 5.10395 17.7849 7.73223 18.3661C7.2504 18.5032 6.74218 18.5745 6.2195 18.5719C5.85634 18.57 5.49437 18.5304 5.13941 18.4536C5.86973 20.8902 7.99227 22.6703 10.5051 22.7297C8.53846 24.3601 6.06106 25.334 3.37133 25.3272C2.90757 25.3272 2.44929 25.2961 2 25.2397C4.54329 26.9841 7.56224 28 10.8076 28C21.3719 28.0025 27.1493 18.8084 27.1493 10.8313V10.8313Z" fill="currentColor"></path></svg></a></div><div class="social"><a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-1x7x8fger-F7NoshFQn~djlvGdnEtxUQ" title="slack" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_125_278)"><path d="M12.5875 16.6906C11.0844 16.6906 9.86562 17.9094 9.86562 19.4125V26.2375C9.86562 26.9594 10.1524 27.6517 10.6628 28.1622C11.1733 28.6726 11.8656 28.9594 12.5875 28.9594C13.3094 28.9594 14.0017 28.6726 14.5122 28.1622C15.0226 27.6517 15.3094 26.9594 15.3094 26.2375V19.4531C15.3094 17.9094 14.0906 16.6906 12.5875 16.6906ZM3 19.4531C3 20.175 3.28677 20.8673 3.79722 21.3778C4.30767 21.8882 4.99999 22.175 5.72187 22.175C6.44376 22.175 7.13608 21.8882 7.64653 21.3778C8.15698 20.8673 8.44375 20.175 8.44375 19.4531V16.7312H5.7625C4.25938 16.6906 3 17.9094 3 19.4531ZM12.5875 3C11.8656 3 11.1733 3.28677 10.6628 3.79722C10.1524 4.30767 9.86562 4.99999 9.86562 5.72187C9.86562 6.44376 10.1524 7.13608 10.6628 7.64653C11.1733 8.15698 11.8656 8.44375 12.5875 8.44375H15.3094V5.72187C15.3094 4.21875 14.0906 3 12.5875 3ZM5.72187 15.3094H12.5469C13.2688 15.3094 13.9611 15.0226 14.4715 14.5122C14.982 14.0017 15.2688 13.3094 15.2688 12.5875C15.2688 11.8656 14.982 11.1733 14.4715 10.6628C13.9611 10.1524 13.2688 9.86562 12.5469 9.86562H5.72187C4.99999 9.86562 4.30767 10.1524 3.79722 10.6628C3.28677 11.1733 3 11.8656 3 12.5875C3 13.3094 3.28677 14.0017 3.79722 14.5122C4.30767 15.0226 4.99999 15.3094 5.72187 15.3094ZM26.2375 9.86562C24.7344 9.86562 23.5156 11.0844 23.5156 12.5875V15.3094H26.2375C26.9594 15.3094 27.6517 15.0226 28.1622 14.5122C28.6726 14.0017 28.9594 13.3094 28.9594 12.5875C28.9594 11.8656 28.6726 11.1733 28.1622 10.6628C27.6517 10.1524 26.9594 9.86562 26.2375 9.86562ZM16.6906 5.72187V12.5875C16.6906 13.3094 16.9774 14.0017 17.4878 14.5122C17.9983 15.0226 18.6906 15.3094 19.4125 15.3094C20.1344 15.3094 20.8267 15.0226 21.3372 14.5122C21.8476 14.0017 22.1344 13.3094 22.1344 12.5875V5.72187C22.1344 4.99999 21.8476 4.30767 21.3372 3.79722C20.8267 3.28677 20.1344 3 19.4125 3C18.6906 3 17.9983 3.28677 17.4878 3.79722C16.9774 4.30767 16.6906 4.99999 16.6906 5.72187ZM22.1344 26.2781C22.1344 24.775 20.9156 23.5562 19.4125 23.5562H16.6906V26.2781C16.6906 27 16.9774 27.6923 17.4878 28.2028C17.9983 28.7132 18.6906 29 19.4125 29C20.1344 29 20.8267 28.7132 21.3372 28.2028C21.8476 27.6923 22.1344 27 22.1344 26.2781ZM26.2781 16.6906H19.4125C18.6906 16.6906 17.9983 16.9774 17.4878 17.4878C16.9774 17.9983 16.6906 18.6906 16.6906 19.4125C16.6906 20.1344 16.9774 20.8267 17.4878 21.3372C17.9983 21.8476 18.6906 22.1344 19.4125 22.1344H26.2375C27.7406 22.1344 28.9594 20.9156 28.9594 19.4125C29 17.9094 27.7812 16.6906 26.2781 16.6906Z" fill="currentColor"></path></g><defs><clipPath id="clip0_125_278"><rect width="26" height="26" fill="currentColor" transform="translate(3 3)"></rect></clipPath></defs></svg></a><a href="https://space.bilibili.com/362350065" title="bilibili" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.0533 11.5412H9.14591C8.72353 11.5412 8.36784 11.8633 8.36784 12.296V21.5162C8.36784 21.9489 8.72349 22.2665 9.14591 22.2665H23.0533C23.4757 22.2665 23.7928 21.949 23.7928 21.5162V12.296C23.7928 11.8633 23.4757 11.5412 23.0533 11.5412ZM10.0928 14.9479L14.0122 14.1975L14.3083 15.6685L10.4284 16.4188L10.0928 14.9479ZM16.1348 19.4301C14.9303 20.7431 13.6667 19.0155 13.6667 19.0155L14.3084 18.6008C14.3084 18.6008 15.1673 20.1508 16.125 18.0973C17.0432 20.0916 18.06 18.6206 18.06 18.6304L18.6426 19.0057C18.6426 19.0057 17.5565 20.7431 16.1348 19.4301ZM21.9498 16.4189L18.06 15.6686L18.3661 14.1976L22.2756 14.948L21.9498 16.4189Z" fill="currentColor"></path><path d="M16 2C8.26801 2 2 8.26805 2 16C2 23.7319 8.26806 30 16 30C23.7319 30 30 23.7319 30 16C30 8.26801 23.732 2 16 2ZM23.3727 24.1329C22.3941 24.1019 22.0644 24.1329 22.0644 24.1329C22.0644 24.1329 21.9923 25.2558 21.0343 25.2764C20.0659 25.2867 19.9216 24.4934 19.8907 24.1947C19.3035 24.1947 12.2467 24.2255 12.2467 24.2255C12.2467 24.2255 12.1231 25.266 11.165 25.266C10.1967 25.266 10.1451 24.4006 10.0833 24.2255C9.45486 24.2255 8.6101 24.2049 8.6101 24.2049C8.6101 24.2049 6.48791 23.7621 6.20978 21.0012C6.24067 18.2402 6.20978 12.7801 6.20978 12.7801C6.20978 12.7801 6.01404 10.2356 8.54836 9.50415C9.33118 9.4733 11.0208 9.46293 12.9781 9.46293L11.1753 7.71159C11.1753 7.71159 10.8971 7.36131 11.371 6.96986C11.8553 6.57846 11.8757 6.73797 12.0406 6.85128C12.2055 6.96456 14.7295 9.45229 14.7295 9.45229H14.3895C15.3579 9.45229 16.3572 9.46799 17.3152 9.46799C17.686 9.09711 19.798 7.02903 19.9422 6.92612C20.107 6.82309 20.1378 6.64927 20.6118 7.04068C21.0857 7.43213 20.8075 7.78309 20.8075 7.78309L19.0459 9.48322C21.4668 9.50386 23.3315 9.51423 23.3315 9.51423C23.3315 9.51423 25.7214 10.0398 25.7833 12.78C25.7524 15.5203 25.7936 21.0319 25.7936 21.0319C25.7936 21.0319 25.6598 23.7104 23.3727 24.1329Z" fill="currentColor"></path></svg></a><a class="item wechat"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.7578 11.5169C21.0708 11.5169 21.3795 11.5398 21.6851 11.573C20.8524 7.73517 16.7052 4.88306 11.9718 4.88306C6.67951 4.88306 2.34412 8.45283 2.34412 12.9854C2.34412 15.6013 3.78679 17.7498 6.19667 19.4161L5.2339 22.2827L8.59917 20.6122C9.80411 20.8478 10.7698 21.0906 11.9718 21.0906C12.2738 21.0906 12.5728 21.0759 12.8703 21.0523C12.682 20.4159 12.5728 19.7485 12.5728 19.0566C12.5728 14.8947 16.1847 11.5169 20.7578 11.5169ZM15.5822 8.9335C16.3072 8.9335 16.7871 9.40601 16.7871 10.1229C16.7871 10.8369 16.3072 11.3153 15.5822 11.3153C14.8601 11.3153 14.1365 10.8369 14.1365 10.1229C14.1365 9.40601 14.8601 8.9335 15.5822 8.9335ZM8.84429 11.3153C8.12218 11.3153 7.3942 10.8368 7.3942 10.1229C7.3942 9.40597 8.12218 8.93346 8.84429 8.93346C9.56559 8.93346 10.0463 9.40597 10.0463 10.1229C10.0463 10.8369 9.56559 11.3153 8.84429 11.3153ZM29.5453 18.9422C29.5453 15.1332 25.6935 12.0285 21.3677 12.0285C16.7871 12.0285 13.1797 15.1332 13.1797 18.9422C13.1797 22.7567 16.7871 25.8547 21.3677 25.8547C22.326 25.8547 23.2932 25.6169 24.2559 25.3777L26.897 26.8086L26.1726 24.4282C28.1056 22.993 29.5453 21.0906 29.5453 18.9422ZM18.7126 17.7498C18.2335 17.7498 17.7499 17.278 17.7499 16.7966C17.7499 16.3219 18.2335 15.8442 18.7126 15.8442C19.4406 15.8442 19.9176 16.3219 19.9176 16.7966C19.9176 17.278 19.4406 17.7498 18.7126 17.7498ZM24.0079 17.7498C23.5324 17.7498 23.0518 17.278 23.0518 16.7966C23.0518 16.3219 23.5324 15.8442 24.0079 15.8442C24.73 15.8442 25.2128 16.3219 25.2128 16.7966C25.2128 17.278 24.73 17.7498 24.0079 17.7498Z" fill="currentColor"></path></svg><div class="wechat-dropdown"><img src="https://cdnd.selectdb.com/zh-CN/assets/images/wechat-31a2eb3bbefef7171acfae2906dc777c.png" alt=""></div></a></div></div></div></div><div class="footer__copyright">Copyright © 2022 The Apache Software Foundation,Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License, Version 2.0</a>. Apache, Doris, Apache Doris, the Apache feather logo and the Apache Doris logo are trademarks of The Apache Software Foundation.</div></div></div></div>
<script src="https://cdnd.selectdb.com/zh-CN/assets/js/runtime~main.d246078c.js"></script>
<script src="https://cdnd.selectdb.com/zh-CN/assets/js/main.70603022.js"></script>
</body>
</html>