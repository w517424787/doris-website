"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[80150],{3905:(e,t,l)=>{l.d(t,{Zo:()=>p,kt:()=>b});var n=l(67294);function a(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function r(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function s(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?r(Object(l),!0).forEach((function(t){a(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):r(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function o(e,t){if(null==e)return{};var l,n,a=function(e,t){if(null==e)return{};var l,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)l=r[n],t.indexOf(l)>=0||(a[l]=e[l]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)l=r[n],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(a[l]=e[l])}return a}var i=n.createContext({}),d=function(e){var t=n.useContext(i),l=t;return e&&(l="function"==typeof e?e(t):s(s({},t),e)),l},p=function(e){var t=d(e.components);return n.createElement(i.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var l=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=d(l),m=a,b=u["".concat(i,".").concat(m)]||u[m]||c[m]||r;return l?n.createElement(b,s(s({ref:t},p),{},{components:l})):n.createElement(b,s({ref:t},p))}));function b(e,t){var l=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=l.length,s=new Array(r);s[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o[u]="string"==typeof e?e:a,s[1]=o;for(var d=2;d<r;d++)s[d]=l[d];return n.createElement.apply(null,s)}return n.createElement.apply(null,l)}m.displayName="MDXCreateElement"},7463:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=l(87462),a=(l(67294),l(3905));const r={title:"Mysql to Doris",language:"zh-CN"},s=void 0,o={unversionedId:"ecosystem/mysql-to-doris",id:"ecosystem/mysql-to-doris",title:"Mysql to Doris",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/ecosystem/mysql-to-doris.md",sourceDirName:"ecosystem",slug:"/ecosystem/mysql-to-doris",permalink:"/zh-CN/docs/dev/ecosystem/mysql-to-doris",draft:!1,tags:[],version:"current",frontMatter:{title:"Mysql to Doris",language:"zh-CN"},sidebar:"docs",previous:{title:"Kyuubi",permalink:"/zh-CN/docs/dev/ecosystem/kyuubi"},next:{title:"Logstash Doris Output Plugin",permalink:"/zh-CN/docs/dev/ecosystem/logstash"}},i={},d=[{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",level:2},{value:"\u914d\u7f6e\u4fe1\u606f",id:"\u914d\u7f6e\u4fe1\u606f",level:2},{value:"env.conf",id:"envconf",level:3},{value:"mysql_tables",id:"mysql_tables",level:3},{value:"doris_tables",id:"doris_tables",level:3},{value:"doris_external_tables",id:"doris_external_tables",level:3},{value:"\u5982\u4f55\u4f7f\u7528",id:"\u5982\u4f55\u4f7f\u7528",level:2},{value:"\u521b\u5efa Doris ODBC \u5916\u90e8\u8868",id:"\u521b\u5efa-doris-odbc-\u5916\u90e8\u8868",level:3},{value:"\u521b\u5efa Doris OLAP \u8868",id:"\u521b\u5efa-doris-olap-\u8868",level:3},{value:"\u521b\u5efa Doris OLAP \u8868\u540c\u65f6\u4ece\u5916\u90e8\u540c\u6b65\u6570\u636e",id:"\u521b\u5efa-doris-olap-\u8868\u540c\u65f6\u4ece\u5916\u90e8\u540c\u6b65\u6570\u636e",level:3},{value:"\u540c\u6b65\u7ed3\u679c\u68c0\u67e5",id:"\u540c\u6b65\u7ed3\u679c\u68c0\u67e5",level:4},{value:"\u5220\u9664 ODBC \u5916\u90e8\u8868",id:"\u5220\u9664-odbc-\u5916\u90e8\u8868",level:4},{value:"\u521b\u5efa Doris OLAP \u8868\u5e76\u4e14\u81ea\u52a8\u540c\u6b65\u8868\u7ed3\u6784\u53d8\u5316",id:"\u521b\u5efa-doris-olap-\u8868\u5e76\u4e14\u81ea\u52a8\u540c\u6b65\u8868\u7ed3\u6784\u53d8\u5316",level:3},{value:"\u901a\u8fc7\u6307\u5b9a\u6570\u636e\u5e93\u6765\u5904\u7406",id:"\u901a\u8fc7\u6307\u5b9a\u6570\u636e\u5e93\u6765\u5904\u7406",level:3}],p={toc:d},u="wrapper";function c(e){let{components:t,...l}=e;return(0,a.kt)(u,(0,n.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"mysql-to-doris"},"Mysql to Doris"),(0,a.kt)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u901a\u8fc7\u96c6\u5408\u4e86 odbc \u5916\u90e8\u8868\u521b\u5efa\u3001\u5185\u90e8\u8868\u521b\u5efa\u4ee5\u53ca\u6570\u636e\u540c\u6b65\u7b49\u529f\u80fd\u6765\u5e2e\u52a9 MySQL \u7528\u6237\u4f7f\u7528 Doris \u7684\u6613\u7528\u5de5\u5177\u3002"),(0,a.kt)("p",null,"mysql to doris \u4ee3\u7801",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/doris/tree/master/extension/mysql_to_doris"},"\u8fd9\u91cc")),(0,a.kt)("h2",{id:"\u76ee\u5f55\u7ed3\u6784"},"\u76ee\u5f55\u7ed3\u6784"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"\u251c\u2500\u2500 bin\n\u2502   \u2514\u2500\u2500 run.sh\n\u251c\u2500\u2500 conf\n\u2502   \u251c\u2500\u2500 doris_external_tables\n\u2502   \u251c\u2500\u2500 doris_tables\n\u2502   \u251c\u2500\u2500 env.conf\n\u2502   \u2514\u2500\u2500 mysql_tables\n\u2514\u2500\u2500 lib\n    \u251c\u2500\u2500 jdbc\n    \u2502   \u251c\u2500\u2500 create_jdbc_catalog.sh\n    \u2502   \u2514\u2500\u2500 sync_to_doris.sh\n    \u251c\u2500\u2500 e_auto.sh\n    \u251c\u2500\u2500 e_mysql_to_doris.sh\n    \u251c\u2500\u2500 get_tables.sh\n    \u251c\u2500\u2500 mysql_to_doris.sh\n    \u251c\u2500\u2500 mysql_type_convert.sh\n    \u251c\u2500\u2500 sync_check.sh\n    \u2514\u2500\u2500 sync_to_doris.sh\n")),(0,a.kt)("h2",{id:"\u914d\u7f6e\u4fe1\u606f"},"\u914d\u7f6e\u4fe1\u606f"),(0,a.kt)("p",null,"\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u90fd\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"conf"),"\u76ee\u5f55\u4e0b\u3002"),(0,a.kt)("h3",{id:"envconf"},"env.conf"),(0,a.kt)("p",null,"\u5728\u8fd9\u91cc\u914d\u7f6e MySQL \u548c Doris \u7684\u76f8\u5173\u914d\u7f6e\u4fe1\u606f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"# doris env\n# doris env\nfe_master_host=<your_fe_master_host>\nfe_master_port=<your_fe_master_query_port>\ndoris_username=<your_doris_username>\ndoris_password=<your_doris_password>\ndoris_odbc_name=<your_doris_odbc_driver_name>\ndoris_jdbc_catalog=<jdbc_catalog_name>\ndoris_jdbc_default_db=<jdbc_default_database>\ndoris_jdbc_driver_url=<jdbc_driver_url>\ndoris_jdbc_driver_class=<jdbc_driver_class>\n\n# mysql env\nmysql_host=<your_mysql_host>\nmysql_port=<your_mysql_port>\nmysql_username=<your_mysql_username>\nmysql_password=<your_mysql_password>\n")),(0,a.kt)("h3",{id:"mysql_tables"},"mysql_tables"),(0,a.kt)("p",null,"\u5728\u8fd9\u91cc\u914d\u7f6e MySQL \u8868\u4fe1\u606f\uff0c\u4ee5",(0,a.kt)("inlineCode",{parentName:"p"},"database.table"),"\u7684\u5f62\u5f0f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"db1.table1\ndb1.table2\ndb2.table3\n")),(0,a.kt)("h3",{id:"doris_tables"},"doris_tables"),(0,a.kt)("p",null,"\u5728\u8fd9\u91cc\u914d\u7f6e Doris Olap \u8868\u4fe1\u606f\uff0c\u4ee5",(0,a.kt)("inlineCode",{parentName:"p"},"database.table"),"\u7684\u5f62\u5f0f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"doris_db.table1\ndoris_db.table2\ndoris_db.table3\n")),(0,a.kt)("h3",{id:"doris_external_tables"},"doris_external_tables"),(0,a.kt)("p",null,"\u5728\u8fd9\u91cc\u914d\u7f6e Doris ODBC \u5916\u90e8\u8868\u4fe1\u606f\uff0c\u4ee5",(0,a.kt)("inlineCode",{parentName:"p"},"database.table"),"\u7684\u5f62\u5f0f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"doris_db.e_table1\ndoris_db.e_table2\ndoris_db.e_table3\n")),(0,a.kt)("h2",{id:"\u5982\u4f55\u4f7f\u7528"},"\u5982\u4f55\u4f7f\u7528"),(0,a.kt)("p",null,"bin/run.sh \u662f\u542f\u52a8\u7684 shell \u811a\u672c\uff0c\u4e0b\u9762\u662f\u811a\u672c\u7684\u53c2\u6570\u9009\u9879\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'Usage: run.sh [option]\n    -e, --create-external-table: create doris external table\n    -o, --create-olap-table: create doris olap table\n    -i, --insert-data: insert data into doris olap table from doris external table\n    -d, --drop-external-table: drop doris external table\n    -a, --auto-external-table: create doris external table and auto check mysql schema change\n    --database: specify the database name to process all tables under the entire database, and separate multiple databases with ","\n    -t, --type: specify external table type, valid options: ODBC(default), JDBC\n    -h, --help: show usage\n')),(0,a.kt)("h3",{id:"\u521b\u5efa-doris-odbc-\u5916\u90e8\u8868"},"\u521b\u5efa Doris ODBC \u5916\u90e8\u8868"),(0,a.kt)("p",null,"\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh --create-external-table\n")),(0,a.kt)("p",null,"\u6216\u8005"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh -e\n")),(0,a.kt)("p",null,"\u6267\u884c\u5b8c\u6210\u540e ODBC \u5916\u90e8\u8868\u5c31\u521b\u5efa\u5b8c\u6210\uff0c\u540c\u65f6\u5efa\u8868\u8bed\u53e5\u4f1a\u88ab\u751f\u6210\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"result/mysql/e_mysql_to_doris.sql"),"\u6587\u4ef6\u4e2d\u3002"),(0,a.kt)("h3",{id:"\u521b\u5efa-doris-olap-\u8868"},"\u521b\u5efa Doris OLAP \u8868"),(0,a.kt)("p",null,"\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh --create-olap-table\n")),(0,a.kt)("p",null,"\u6216\u8005"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh -o\n")),(0,a.kt)("p",null,"\u6267\u884c\u5b8c\u6210\u540e ODBC OLAP \u8868\u5c31\u521b\u5efa\u5b8c\u6210\uff0c\u540c\u65f6\u5efa\u8868\u8bed\u53e5\u4f1a\u88ab\u751f\u6210\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"result/mysql/mysql_to_doris.sql"),"\u6587\u4ef6\u4e2d\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u8bbe\u7f6e ",(0,a.kt)("inlineCode",{parentName:"p"},"--type")," \u9009\u9879\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC"),"\uff0c\u5219\u4f1a\u521b\u5efa JDBC Catalog\uff0c\u540c\u65f6\u521b\u5efa\u8bed\u53e5\u8bed\u53e5\u4f1a\u88ab\u751f\u6210\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"result/mysql/jdbc_catalog.sql")," \u6587\u4ef6\u4e2d\u3002"),(0,a.kt)("h3",{id:"\u521b\u5efa-doris-olap-\u8868\u540c\u65f6\u4ece\u5916\u90e8\u540c\u6b65\u6570\u636e"},"\u521b\u5efa Doris OLAP \u8868\u540c\u65f6\u4ece\u5916\u90e8\u540c\u6b65\u6570\u636e"),(0,a.kt)("p",null,"\u524d\u63d0\u662f\u4f60\u5df2\u7ecf\u521b\u5efa\u5916\u90e8\u8868\uff08JDBC \u65b9\u5f0f\u5219\u4e3a JDBC Catalog\uff09\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u521b\u5efa\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh --create-olap-table --insert-data\n")),(0,a.kt)("p",null,"\u6216\u8005"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh -o -i\n")),(0,a.kt)("p",null,"\u6267\u884c\u5b8c\u6210\u540e ODBC OLAP \u8868\u5c31\u521b\u5efa\u5b8c\u6210\uff0c\u540c\u65f6\u5efa\u8868\u8bed\u53e5\u4f1a\u88ab\u751f\u6210\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"result/mysql/mysql_to_doris.sql"),"\u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u540c\u6b65\u8bed\u53e5\u4f1a\u88ab\u751f\u6210\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"result/mysql/sync_to_doris.sql"),"\u6587\u4ef6\u4e2d\u3002"),(0,a.kt)("h4",{id:"\u540c\u6b65\u7ed3\u679c\u68c0\u67e5"},"\u540c\u6b65\u7ed3\u679c\u68c0\u67e5"),(0,a.kt)("p",null,"\u540c\u6b65\u6570\u636e\u4e4b\u540e\u4f1a\u6267\u884c\u540c\u6b65\u7ed3\u679c\u68c0\u67e5\u4efb\u52a1\uff0c\u5bf9olap\u8868\u548cmysql\u8868\u7684\u6570\u636e\u91cf\u8fdb\u884c\u5bf9\u6bd4\uff0c\u68c0\u67e5\u7ed3\u679c\u4fdd\u5b58\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"result/mysql/sync_check")," \u6587\u4ef6\u4e2d\u3002"),(0,a.kt)("h4",{id:"\u5220\u9664-odbc-\u5916\u90e8\u8868"},"\u5220\u9664 ODBC \u5916\u90e8\u8868"),(0,a.kt)("p",null,"\u5982\u679c\u5728\u6570\u636e\u540c\u6b65\u6267\u884c\u5b8c\u6210\u540e\u60f3\u8981\u5220\u9664 ODBC \u5916\u90e8\u8868\uff0c\u6dfb\u52a0",(0,a.kt)("inlineCode",{parentName:"p"},"--drop-external-table"),"\u6216",(0,a.kt)("inlineCode",{parentName:"p"},"-d"),"\u9009\u9879\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh --create-olap-table --insert-data --drop-external-table\n")),(0,a.kt)("p",null,"\u6216\u8005"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh -o -i -d\n")),(0,a.kt)("p",null,"\u6b64\u9009\u9879\u53ea\u5f53 ",(0,a.kt)("inlineCode",{parentName:"p"},"--type")," \u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"ODBC")," \u65f6\u6709\u6548\u3002"),(0,a.kt)("h3",{id:"\u521b\u5efa-doris-olap-\u8868\u5e76\u4e14\u81ea\u52a8\u540c\u6b65\u8868\u7ed3\u6784\u53d8\u5316"},"\u521b\u5efa Doris OLAP \u8868\u5e76\u4e14\u81ea\u52a8\u540c\u6b65\u8868\u7ed3\u6784\u53d8\u5316"),(0,a.kt)("p",null,"\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh --auto-external-table\n")),(0,a.kt)("p",null,"\u6216\u8005"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/run.sh -a\n")),(0,a.kt)("p",null,"\u7a0b\u5e8f\u4f1a\u5728\u540e\u53f0\u6267\u884c\uff0c\u8fdb\u7a0b ID \u88ab\u4fdd\u5b58\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"e_auto.pid"),"\u6587\u4ef6\u3002 "),(0,a.kt)("h3",{id:"\u901a\u8fc7\u6307\u5b9a\u6570\u636e\u5e93\u6765\u5904\u7406"},"\u901a\u8fc7\u6307\u5b9a\u6570\u636e\u5e93\u6765\u5904\u7406"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u7684\u8868\u6bd4\u8f83\u591a\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u81ea\u5b9a\u4e49doris\u8868\u540d\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"--databases"),"\u9009\u9879\u6307\u5b9a\u8981\u5904\u7406\u7684\u6570\u636e\u5e93\u540d\uff0c\u65e0\u9700\u624b\u52a8\u914d\u7f6e\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# \u5355\u4e2a\u6570\u636e\u5e93\nsh bin/run.sh --databases db1\n")),(0,a.kt)("p",null,"\u6216\u8005"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# \u591a\u4e2a\u6570\u636e\u5e93 \nsh bin/run.sh --databases db1,db2,db3\n")),(0,a.kt)("p",null,"\u901a\u8fc7\u8fd9\u4e2a\u9009\u9879\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u83b7\u53d6mysql\u6307\u5b9a\u6570\u636e\u5e93\u4e0b\u7684\u5168\u90e8\u8868\uff0c\u5e76\u751f\u6210mysql_tables, doris_tables\u548cdoris_external_tables\u7684\u914d\u7f6e\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u8bf7\u6ce8\u610f\uff0c\u8be5\u9009\u9879\u9700\u8981\u914d\u5408\u5176\u4ed6\u9009\u9879\u4e00\u8d77\u4f7f\u7528\u3002")))}c.isMDXComponent=!0}}]);